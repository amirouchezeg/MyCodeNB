<!DOCTYPE html>
<!-- saved from url=(0070)https://androidkennel.org/android-tutorial-getting-the-users-location/ -->
<html lang="en-US" class="js"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><link rel="stylesheet" type="text/css" href="./How to get the User Location in Android Tutorial – Zenva _ Android Kennel_files/2c644.css" media="all"><meta name="viewport" content="width=device-width"><link rel="profile" href="http://gmpg.org/xfn/11"><link rel="pingback" href="https://androidkennel.org/xmlrpc.php"><meta name="google-site-verification" content="ndzgeMjtu4HczPcRJsLFwf60BJt7irVyfx75WMEePBY">
<!--[if lt IE 9]> <script src="https://cdnandroidkennel.azureedge.net/wp-content/themes/twentyfifteen/js/html5.js?x64257"></script> <![endif]--><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content="@zenvatweets"><meta name="twitter:creator" content="@zenvatweets"><meta name="twitter:title" content="How to get the User Location in Android Tutorial"><meta name="twitter:description" content="Hello world! In this post, we&#39;re going to learn how we can use Google Play Services to access the user&#39;s location. Along with that, we&#39;re also going to learn how to use Android Marshmallow&#39;s new ru"><meta name="twitter:image" content="https://cdnandroidkennel.azureedge.net/wp-content/uploads/2015/11/Location-–-1-373x619.png?x64257"><meta property="og:image" content="https://cdnandroidkennel.azureedge.net/wp-content/uploads/2015/11/Location-–-1-373x619.png?x64257"><meta property="og:url" content="https://androidkennel.org/android-tutorial-getting-the-users-location/"><meta property="og:type" content="article"><meta property="og:title" content="How to get the User Location in Android Tutorial"><meta property="og:description" content="Hello world! In this post, we&#39;re going to learn how we can use Google Play Services to access the user&#39;s location. Along with that, we&#39;re also going to learn how to use Android Marshmallow&#39;s new ru"><meta property="og:image" content="https://cdnandroidkennel.azureedge.net/wp-content/uploads/2015/11/Location-–-1-373x619.png?x64257"> <script async="" src="./How to get the User Location in Android Tutorial – Zenva _ Android Kennel_files/analytics.js"></script><script src="./How to get the User Location in Android Tutorial – Zenva _ Android Kennel_files/1656078718011363" async=""></script><script async="" src="./How to get the User Location in Android Tutorial – Zenva _ Android Kennel_files/fbevents.js"></script><script>(function(html){html.className = html.className.replace(/\bno-js\b/,'js')})(document.documentElement);</script> <title>How to get the User Location in Android Tutorial – Zenva | Android Kennel</title><link rel="dns-prefetch" href="https://s.w.org/"><link rel="alternate" type="application/rss+xml" title="Zenva | Android Kennel » Feed" href="https://androidkennel.org/feed/"><link rel="alternate" type="application/rss+xml" title="Zenva | Android Kennel » Comments Feed" href="https://androidkennel.org/comments/feed/"><link rel="alternate" type="application/rss+xml" title="Zenva | Android Kennel » How to get the User Location in Android Tutorial Comments Feed" href="https://androidkennel.org/android-tutorial-getting-the-users-location/feed/"> <script type="text/javascript">window._wpemojiSettings = {"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/2.3\/72x72\/","ext":".png","svgUrl":"https:\/\/s.w.org\/images\/core\/emoji\/2.3\/svg\/","svgExt":".svg","source":{"concatemoji":"https:\/\/androidkennel.org\/wp-includes\/js\/wp-emoji-release.min.js?ver=4.8.3"}};
			!function(a,b,c){function d(a){var b,c,d,e,f=String.fromCharCode;if(!k||!k.fillText)return!1;switch(k.clearRect(0,0,j.width,j.height),k.textBaseline="top",k.font="600 32px Arial",a){case"flag":return k.fillText(f(55356,56826,55356,56819),0,0),b=j.toDataURL(),k.clearRect(0,0,j.width,j.height),k.fillText(f(55356,56826,8203,55356,56819),0,0),c=j.toDataURL(),b!==c&&(k.clearRect(0,0,j.width,j.height),k.fillText(f(55356,57332,56128,56423,56128,56418,56128,56421,56128,56430,56128,56423,56128,56447),0,0),b=j.toDataURL(),k.clearRect(0,0,j.width,j.height),k.fillText(f(55356,57332,8203,56128,56423,8203,56128,56418,8203,56128,56421,8203,56128,56430,8203,56128,56423,8203,56128,56447),0,0),c=j.toDataURL(),b!==c);case"emoji4":return k.fillText(f(55358,56794,8205,9794,65039),0,0),d=j.toDataURL(),k.clearRect(0,0,j.width,j.height),k.fillText(f(55358,56794,8203,9794,65039),0,0),e=j.toDataURL(),d!==e}return!1}function e(a){var c=b.createElement("script");c.src=a,c.defer=c.type="text/javascript",b.getElementsByTagName("head")[0].appendChild(c)}var f,g,h,i,j=b.createElement("canvas"),k=j.getContext&&j.getContext("2d");for(i=Array("flag","emoji4"),c.supports={everything:!0,everythingExceptFlag:!0},h=0;h<i.length;h++)c.supports[i[h]]=d(i[h]),c.supports.everything=c.supports.everything&&c.supports[i[h]],"flag"!==i[h]&&(c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&c.supports[i[h]]);c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&!c.supports.flag,c.DOMReady=!1,c.readyCallback=function(){c.DOMReady=!0},c.supports.everything||(g=function(){c.readyCallback()},b.addEventListener?(b.addEventListener("DOMContentLoaded",g,!1),a.addEventListener("load",g,!1)):(a.attachEvent("onload",g),b.attachEvent("onreadystatechange",function(){"complete"===b.readyState&&c.readyCallback()})),f=c.source||{},f.concatemoji?e(f.concatemoji):f.wpemoji&&f.twemoji&&(e(f.twemoji),e(f.wpemoji)))}(window,document,window._wpemojiSettings);</script><script src="./How to get the User Location in Android Tutorial – Zenva _ Android Kennel_files/wp-emoji-release.min.js" type="text/javascript" defer=""></script> <style type="text/css">img.wp-smiley,
img.emoji {
	display: inline !important;
	border: none !important;
	box-shadow: none !important;
	height: 1em !important;
	width: 1em !important;
	margin: 0 .07em !important;
	vertical-align: -0.1em !important;
	background: none !important;
	padding: 0 !important;
}</style><style id="twentyfifteen-style-inline-css" type="text/css">.post-navigation .nav-previous { background-image: url(https://cdnandroidkennel.azureedge.net/wp-content/uploads/2015/11/AsyncTask-–-2-825x510.png?x64257); }
			.post-navigation .nav-previous .post-title, .post-navigation .nav-previous a:hover .post-title, .post-navigation .nav-previous .meta-nav { color: #fff; }
			.post-navigation .nav-previous a:before { background-color: rgba(0, 0, 0, 0.4); }
		
			.post-navigation .nav-next { background-image: url(https://cdnandroidkennel.azureedge.net/wp-content/uploads/2015/11/Material-Design-–-2-825x510.png?x64257); border-top: 0; }
			.post-navigation .nav-next .post-title, .post-navigation .nav-next a:hover .post-title, .post-navigation .nav-next .meta-nav { color: #fff; }
			.post-navigation .nav-next a:before { background-color: rgba(0, 0, 0, 0.4); }</style><!--[if lt IE 9]><link
rel='stylesheet' id='twentyfifteen-ie-css'  href='https://cdnandroidkennel.azureedge.net/wp-content/themes/twentyfifteen/css/ie.css?x64257' type='text/css' media='all' />
<![endif]-->
<!--[if lt IE 8]><link
rel='stylesheet' id='twentyfifteen-ie7-css'  href='https://cdnandroidkennel.azureedge.net/wp-content/themes/twentyfifteen/css/ie7.css?x64257' type='text/css' media='all' />
<![endif]--> <script defer="" type="text/javascript" src="./How to get the User Location in Android Tutorial – Zenva _ Android Kennel_files/df983.js"></script> <script type="text/javascript">/*  */
var CrayonSyntaxSettings = {"version":"_2.7.2_beta","is_admin":"0","ajaxurl":"https:\/\/androidkennel.org\/wp-admin\/admin-ajax.php","prefix":"crayon-","setting":"crayon-setting","selected":"crayon-setting-selected","changed":"crayon-setting-changed","special":"crayon-setting-special","orig_value":"data-orig-value","debug":""};
var CrayonSyntaxStrings = {"copy":"Press %s to Copy, %s to Paste","minimize":"Click To Expand Code"};
/*  */</script> <script defer="" type="text/javascript" src="./How to get the User Location in Android Tutorial – Zenva _ Android Kennel_files/b34c1.js"></script> <script type="text/javascript">/*  */
var wpdiscuzAjaxObj = {"url":"https:\/\/androidkennel.org\/wp-admin\/admin-ajax.php","wpdiscuz_options":{"wc_hide_replies_text":"Hide Replies","wc_show_replies_text":"Show Replies","wc_msg_required_fields":"Please fill out required fields","wc_invalid_field":"Some of field value is invalid","wc_error_empty_text":"please fill out this field to comment","wc_error_url_text":"url is invalid","wc_error_email_text":"email address is invalid","wc_invalid_captcha":"Invalid Captcha Code","wc_login_to_vote":"You Must Be Logged In To Vote","wc_deny_voting_from_same_ip":"You are not allowed to vote for this comment","wc_self_vote":"You cannot vote for your comment","wc_vote_only_one_time":"You've already voted for this comment","wc_voting_error":"Voting Error","wc_held_for_moderate":"Comment awaiting moderation","wc_comment_edit_not_possible":"Sorry, this comment no longer possible to edit","wc_comment_not_updated":"Sorry, the comment was not updated","wc_comment_not_edited":"You've not made any changes","wc_new_comment_button_text":"new comment","wc_new_comments_button_text":"new comments","wc_new_reply_button_text":"new reply on your comment","wc_new_replies_button_text":"new replies on your comments","wc_msg_input_min_length":"Input is too short","wc_msg_input_max_length":"Input is too long","is_user_logged_in":false,"commentListLoadType":"0","commentListUpdateType":"0","commentListUpdateTimer":"30","liveUpdateGuests":"1","wc_comment_bg_color":"#FEFEFE","wc_reply_bg_color":"#F8F8F8","wordpress_comment_order":"asc","commentsVoteOrder":false,"wordpressThreadCommentsDepth":"3","wordpressIsPaginate":"","commentTextMaxLength":null,"storeCommenterData":100000,"isCaptchaInSession":true,"isGoodbyeCaptchaActive":false,"facebookAppID":"","cookiehash":"4d205cb2759c8fd37149e5ace24e02ee","version":"4.0.15","wc_post_id":1416,"loadLastCommentId":0,"wc_captcha_show_for_guest":1,"wc_captcha_show_for_members":"0","is_email_field_required":1}};
/*  */</script> <script defer="" type="text/javascript" src="./How to get the User Location in Android Tutorial – Zenva _ Android Kennel_files/b8ec0.js"></script> <link rel="https://api.w.org/" href="https://androidkennel.org/wp-json/"><link rel="EditURI" type="application/rsd+xml" title="RSD" href="https://androidkennel.org/xmlrpc.php?rsd"><link rel="wlwmanifest" type="application/wlwmanifest+xml" href="https://cdnandroidkennel.azureedge.net/wp-includes/wlwmanifest.xml"><link rel="prev" title="Android Networking Tutorial with AsyncTask" href="https://androidkennel.org/android-networking-tutorial-with-asynctask/"><link rel="next" title="Beginners Guide to Material Design" href="https://androidkennel.org/material-design-tutorial/"><meta name="generator" content="WordPress 4.8.3"><link rel="canonical" href="https://androidkennel.org/android-tutorial-getting-the-users-location/"><link rel="shortlink" href="https://androidkennel.org/?p=1416"><link rel="alternate" type="application/json+oembed" href="https://androidkennel.org/wp-json/oembed/1.0/embed?url=https%3A%2F%2Fandroidkennel.org%2Fandroid-tutorial-getting-the-users-location%2F"><link rel="alternate" type="text/xml+oembed" href="https://androidkennel.org/wp-json/oembed/1.0/embed?url=https%3A%2F%2Fandroidkennel.org%2Fandroid-tutorial-getting-the-users-location%2F&amp;format=xml"><meta name="apple-itunes-app" content="app-id=1136578460"><meta name="google-play-app" content="app-id=com.zenva.codemurai"><meta name="author" content="Zenva"><meta property="og:type" content="article"><meta property="og:url" content="https://androidkennel.org/android-tutorial-getting-the-users-location/"><meta property="og:title" content="How to get the User Location in Android Tutorial"><meta property="og:description" content=""><meta property="og:image" content="https://cdnandroidkennel.azureedge.net/wp-content/uploads/2015/11/Location-–-1-150x150.png?x64257"><style type="text/css">#wpcomm .wc_new_comment{background:#00B38F;}#wpcomm .wc_new_reply{background:#00B38F;}#wpcomm .wc-form-wrapper{background:#F9F9F9;}#wpcomm select,#wpcomm input[type="text"],#wpcomm input[type="email"],#wpcomm input[type="url"],#wpcomm input[type="date"],#wpcomm input[type="color"]{border:#D9D9D9 1px solid;}#wpcomm .wc-comment .wc-comment-right{background:#FEFEFE;}#wpcomm .wc-reply .wc-comment-right{background:#F8F8F8;}#wpcomm .wc-comment-text{font-size:14px;color:#555;}#wpcomm .wc-blog-administrator > .wc-comment-right .wc-comment-author,#wpcomm .wc-blog-administrator > .wc-comment-right .wc-comment-author a{color:#00B38F;}#wpcomm .wc-blog-administrator > .wc-comment-left .wc-comment-label{background:#00B38F;}#wpcomm .wc-blog-author > .wc-comment-right .wc-comment-author,#wpcomm .wc-blog-author > .wc-comment-right .wc-comment-author a{color:#00B38F;}#wpcomm .wc-blog-author > .wc-comment-left .wc-comment-label{background:#00B38F;}#wpcomm .wc-blog-contributor > .wc-comment-right .wc-comment-author,#wpcomm .wc-blog-contributor > .wc-comment-right .wc-comment-author a{color:#00B38F;}#wpcomm .wc-blog-contributor > .wc-comment-left .wc-comment-label{background:#00B38F;}#wpcomm .wc-blog-editor > .wc-comment-right .wc-comment-author,#wpcomm .wc-blog-editor > .wc-comment-right .wc-comment-author a{color:#00B38F;}#wpcomm .wc-blog-editor > .wc-comment-left .wc-comment-label{background:#00B38F;}#wpcomm .wc-blog-subscriber > .wc-comment-right .wc-comment-author,#wpcomm .wc-blog-subscriber > .wc-comment-right .wc-comment-author a{color:#00B38F;}#wpcomm .wc-blog-subscriber > .wc-comment-left .wc-comment-label{background:#00B38F;}#wpcomm .wc-blog-post_author > .wc-comment-right .wc-comment-author,#wpcomm .wc-blog-post_author > .wc-comment-right .wc-comment-author a{color:#00B38F;}#wpcomm .wc-blog-post_author > .wc-comment-left .wc-comment-label{background:#00B38F;}#wpcomm .wc-blog-guest > .wc-comment-right .wc-comment-author,#wpcomm .wc-blog-guest > .wc-comment-right .wc-comment-author a{color:#00B38F;}#wpcomm .wc-blog-guest > .wc-comment-left .wc-comment-label{background:#00B38F;}.wc-load-more-submit{border:1px solid #D9D9D9;}#wpcomm .wc-new-loaded-comment > .wc-comment-right{background:#FFFAD6;}.comments-area{width:auto;}.wpdiscuz-front-actions{background:#F9F9F9;}.wpdiscuz-subscribe-bar{background:#F9F9F9;}.wpdiscuz-sort-buttons{color:#bbbbbb;}.wpdiscuz-sort-button{color:#bbbbbb; cursor:pointer;}.wpdiscuz-sort-button:hover{color:#00B38F;cursor:pointer;}.wpdiscuz-sort-button-active{color:#00B38F!important;cursor:default!important;}#wpcomm .page-numbers{color:#555;border:#555 1px solid;}#wpcomm span.current{background:#555;}#wpcomm .wpdiscuz-readmore{cursor:pointer;color:#00B38F;} #wpcomm .wpdiscuz-textarea-wrap{border:#D9D9D9 1px solid;} .wpd-custom-field .wcf-pasiv-star, #wpcomm .wpdiscuz-item .wpdiscuz-rating > label {color: #DDDDDD;}#wpcomm .wpdiscuz-item .wpdiscuz-rating:not(:checked) > label:hover,.wpdiscuz-rating:not(:checked) > label:hover ~ label {   }#wpcomm .wpdiscuz-item .wpdiscuz-rating > input ~ label:hover, #wpcomm .wpdiscuz-item .wpdiscuz-rating > input:not(:checked) ~ label:hover ~ label, #wpcomm .wpdiscuz-item .wpdiscuz-rating > input:not(:checked) ~ label:hover ~ label{color: #FFED85;} #wpcomm .wpdiscuz-item .wpdiscuz-rating > input:checked ~ label:hover, #wpcomm .wpdiscuz-item .wpdiscuz-rating > input:checked ~ label:hover, #wpcomm .wpdiscuz-item .wpdiscuz-rating > label:hover ~ input:checked ~ label, #wpcomm .wpdiscuz-item .wpdiscuz-rating > input:checked + label:hover ~ label, #wpcomm .wpdiscuz-item .wpdiscuz-rating > input:checked ~ label:hover ~ label, .wpd-custom-field .wcf-activ-star, #wpcomm .wpdiscuz-item .wpdiscuz-rating > input:checked ~ label{ color:#FFD700;} #wpcomm .wc-cta-button:hover{border: 1px solid #00B38F!important; background:#00B38F!important; color:#fff!important;} #wpcomm .wc-cta-active{border: 1px solid #00B38F!important; background:#00B38F!important; color:#fff!important;}#wpcomm .wpf-cta:hover{color:#fff!important; background:#00B38F!important; border:1px solid #00B38F!important;}
        
#wpcomm .wpf-cta{ border: 1px solid #cccccc; color:#bbbbbb; }
#wpcomm .wc-cta-button{ background:#888888; border:1px solid #888888; color:#ffffff;}
#wpcomm .wc-cta-button-x{ background:#888888; border:1px solid #888888; color:#ffffff;}
#wpcomm .wc-vote-link{border:1px solid #bbbbbb; color:#aaaaaa;}
#wpcomm .wc-vote-result{border-top: 1px solid #bbbbbb; border-bottom: 1px solid #bbbbbb; color:#aaaaaa;}
#wpcomm .wc-vote-result.wc-vote-result-like{border:1px solid #bbbbbb;}
#wpcomm .wc-vote-result.wc-vote-result-dislike{border:1px solid #bbbbbb;}</style><link rel="icon" href="https://cdnandroidkennel.azureedge.net/wp-content/uploads/2015/10/cropped-logo512-32x32.png?x64257" sizes="32x32"><link rel="icon" href="https://cdnandroidkennel.azureedge.net/wp-content/uploads/2015/10/cropped-logo512-192x192.png?x64257" sizes="192x192"><link rel="apple-touch-icon-precomposed" href="https://cdnandroidkennel.azureedge.net/wp-content/uploads/2015/10/cropped-logo512-180x180.png?x64257"><meta name="msapplication-TileImage" content="https://cdnandroidkennel.azureedge.net/wp-content/uploads/2015/10/cropped-logo512-270x270.png?x64257">
 <script>!function(f,b,e,v,n,t,s){if(f.fbq)return;n=f.fbq=function(){n.callMethod?
            n.callMethod.apply(n,arguments):n.queue.push(arguments)};if(!f._fbq)f._fbq=n;
            n.push=n;n.loaded=!0;n.version='2.0';n.queue=[];t=b.createElement(e);t.async=!0;
            t.src=v;s=b.getElementsByTagName(e)[0];s.parentNode.insertBefore(t,s)}(window,
            document,'script','//connect.facebook.net/en_US/fbevents.js');
            fbq('init', '1656078718011363');
            fbq('track', "PageView");
            setTimeout(function(){
                fbq('track', "ViewContent");                
                fbq('track', "ViewBlogPost");
            }, 60000);</script> <noscript>&lt;img
height="1" width="1" style="display:none"
src="https://www.facebook.com/tr?id=1656078718011363&amp;ev=PageView&amp;noscript=1"
/&gt;</noscript></head><body class="post-template-default single single-post postid-1416 single-format-standard wpdiscuz_4.0.15"><div id="page" class="hfeed site">
<a class="skip-link screen-reader-text" href="https://androidkennel.org/android-tutorial-getting-the-users-location/#content">Skip to content</a><div id="navbar" class="top-navbar">
<nav id="site-navigation" class="navigation top-navigation" role="navigation">
<a class="zva-logo-link" href="https://zenva.com/"><img class="zva-logo" src="./How to get the User Location in Android Tutorial – Zenva _ Android Kennel_files/zenvalogo.png"></a>
<a class="zva-logo-link" href="https://androidkennel.org/" rel="home"><img class="blog-logo" src="./How to get the User Location in Android Tutorial – Zenva _ Android Kennel_files/logo_kennel-w180-e1446626305857.png" alt="Zenva | Android Kennel" title="Zenva | Android Kennel"></a>
<a class="login-btn" href="https://academy.zenva.com/?zva_show_login=1&amp;zva_src=https://androidkennel.org-login-btn">Login / Signup</a><div class="menu-top-header-menu-container"><ul id="menu-top-header-menu" class="top-nav-menu"><li id="menu-item-1581" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-has-children menu-item-1581"><a>Free Ebooks</a><ul class="sub-menu"><li id="menu-item-1583" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-1583"><a href="https://androidkennel.org/free-ebook-java-programming/">Java</a></li><li id="menu-item-1582" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-1582"><a href="https://androidkennel.org/free-ebook-android-development-for-human-beings/">Android</a></li></ul></li><li id="menu-item-1584" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-has-children menu-item-1584"><a>Free Courses</a><ul class="sub-menu"><li id="menu-item-1585" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-1585"><a href="https://academy.zenva.com/product/learn-to-code-in-html-and-css/?zva_src=androidkennel-top-menu">HTML / CSS</a></li><li id="menu-item-1586" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-1586"><a href="https://academy.zenva.com/product/intro-to-html5-game-development/?zva_src=androidkennel-top-menu">HTML5 Game Development</a></li><li id="menu-item-1587" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-1587"><a href="https://academy.zenva.com/product/unity-game-development-create-a-basketball-game/?zva_src=androidkennel-top-menu">Unity Game Development</a></li><li id="menu-item-1588" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-1588"><a href="https://academy.zenva.com/product/intro-virtual-reality-game-development-with-unity/?zva_src=androidkennel-top-menu">Virtual Reality</a></li></ul></li><li id="menu-item-1589" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-1589"><a href="https://academy.zenva.com/?zva_src=androidkennel-top-menu">All Courses</a></li></ul></div>
</nav></div><div id="top-area"></div><div id="sidebar" class="sidebar">
<header id="masthead" class="site-header" role="banner"><div class="site-branding">
<a class="zva-logo-link" href="https://zenva.com/"><img class="zva-logo" src="./How to get the User Location in Android Tutorial – Zenva _ Android Kennel_files/zenvalogo.png"></a>
<button class="secondary-toggle">Menu and widgets</button></div>
</header><div id="secondary" class="secondary">
<a class="zva-mobile-signup" href="https://academy.zenva.com/?zva_show_login=1&amp;zva_src=https://androidkennel.org-login-btn-mobile">Login / Signup</a><div id="widget-area" class="widget-area" role="complementary">
<aside id="zvapfa_id-2" class="widget zvapfa_class"><h2 class="widget-title"></h2><div id="zva-course">    <a class="zvapfa_link" href="https://academy.zenva.com/product/python-mini-degree/?zva_src=https://androidkennel.org-za-ad-plugin">
    <img src="./How to get the User Location in Android Tutorial – Zenva _ Android Kennel_files/Phython-CS-V3-257x144.png" title="Python Mini-Degree - 12 Courses to Learn and Master Python">
    </a>  
    <div class="zvapfa_desc">Successfully funded on Kickstarter by +400 backers!
A Project-Based Approach to Becoming a Python Programming Expert


The Python Mini-Degree is a bundle of 12 online video courses, that go all the wa...</div>
    <a class="zvapfa_link" href="https://academy.zenva.com/product/python-mini-degree/?zva_src=https://androidkennel.org-za-ad-plugin">
    <span class="zvapfa_title">Python Mini-Degree - 12 Courses to Learn and Master Python</span>
    </a>
    
    <div class="zvapfa_price">
        <strike>$495</strike> $79        </div>   
    <div class="zvapfa_btn_container">
        <a href="https://academy.zenva.com/product/python-mini-degree/?zva_src=https://androidkennel.org-za-ad-plugin" class="zvapfa_link zvapfa_btn">Learn More</a>
    </div>
    <div id="productid" style="display:none;" productid="57947"></div>
    <script>
    jQuery(document).ready(function($){
        $('.zvapfa_link').unbind();
        $('.zvapfa_link').click(function(e){
            e.preventDefault();

            $.ajax({
                url: "/wp-admin/admin-ajax.php",
                type : 'post',
                data: {
                    action: 'zvapfa-update-stats',
                    prodId: $('#productid').attr('productid')
                },
                success: function( data ) {
                        window.location = $('.zvapfa_link').attr('href');
                }
            });
        });
    });
    </script>
</div></aside><aside id="search-2" class="widget widget_search"><form role="search" method="get" class="search-form" action="https://androidkennel.org/">
<label>
<span class="screen-reader-text">Search for:</span>
<input type="search" class="search-field" placeholder="Search …" value="" name="s">
</label>
<input type="submit" class="search-submit screen-reader-text" value="Search"></form></aside></div>
<nav id="site-navigation" class="main-navigation" role="navigation"><div class="menu-header-container"><ul id="menu-header" class="nav-menu"><li id="menu-item-398" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-398"><a href="http://zenva.com/">Zenva Home</a></li><li id="menu-item-399" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-399"><a href="https://academy.zenva.com/?zva_src=androidkennel">Online Courses</a></li><li id="menu-item-1153" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-1153"><a href="https://androidkennel.org/category/java-tutorials/">Java Tutorials</a></li><li id="menu-item-1152" class="menu-item menu-item-type-taxonomy menu-item-object-category current-post-ancestor current-menu-parent current-post-parent menu-item-1152"><a href="https://androidkennel.org/category/android-tutorials/">Android Tutorials</a></li></ul></div>			</nav>
<nav id="social-navigation" class="social-navigation" role="navigation"><div class="menu-social-menu-container"><ul id="menu-social-menu" class="menu"><li id="menu-item-954" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-954"><a href="https://twitter.com/zenvatweets"><span class="screen-reader-text">Twitter</span></a></li><li id="menu-item-955" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-955"><a href="https://facebook.com/zenvadev"><span class="screen-reader-text">Facebook</span></a></li><li id="menu-item-956" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-956"><a href="https://youtube.com/fariazz2"><span class="screen-reader-text">YouTube</span></a></li></ul></div>			</nav></div></div><div id="content" class="site-content"><div id="primary" class="content-area">
<main id="main" class="site-main" role="main"><article id="post-1416" class="post-1416 post type-post status-publish format-standard has-post-thumbnail hentry category-android-tutorials tag-activity tag-android tag-google_play_services tag-gradle tag-java tag-location tag-permissions tag-textview"><div class="post-thumbnail" id="post-thumbnail">
<img src="./How to get the User Location in Android Tutorial – Zenva _ Android Kennel_files/Location-–-1-373x619.png" width="373" height="619" class="attachment-zva-post-thumb size-zva-post-thumb wp-post-image" alt="" srcset="https://cdnandroidkennel.azureedge.net/wp-content/uploads/2015/11/Location-–-1-373x619.png?x64257 373w, https://cdnandroidkennel.azureedge.net/wp-content/uploads/2015/11/Location-–-1-181x300.png?x64257 181w, https://cdnandroidkennel.azureedge.net/wp-content/uploads/2015/11/Location-–-1-616x1024.png?x64257 616w, https://cdnandroidkennel.azureedge.net/wp-content/uploads/2015/11/Location-–-1.png?x64257 1076w" sizes="(max-width: 373px) 100vw, 373px" data-lazy-loaded="true" style="display: block;"><noscript>&lt;img
width="373" height="619" src="https://cdnandroidkennel.azureedge.net/wp-content/uploads/2015/11/Location-–-1-373x619.png?x64257" class="attachment-zva-post-thumb size-zva-post-thumb wp-post-image" alt="" srcset="https://cdnandroidkennel.azureedge.net/wp-content/uploads/2015/11/Location-–-1-373x619.png?x64257 373w, https://cdnandroidkennel.azureedge.net/wp-content/uploads/2015/11/Location-–-1-181x300.png?x64257 181w, https://cdnandroidkennel.azureedge.net/wp-content/uploads/2015/11/Location-–-1-616x1024.png?x64257 616w, https://cdnandroidkennel.azureedge.net/wp-content/uploads/2015/11/Location-–-1.png?x64257 1076w" sizes="(max-width: 373px) 100vw, 373px" /&gt;</noscript></div><header class="entry-header"><h1 class="entry-title">How to get the User Location in Android Tutorial</h1>	</header><div class="entry-content"><p>Hello world! In this post, we’re going to learn how we can use Google Play Services to access&nbsp;the user’s location. Along with that, we’re also going to learn how&nbsp;to use&nbsp;Android Marshmallow’s new runtime permissions to ask the user for location permission at runtime&nbsp;instead of when they download&nbsp;your app.</p><p>We’ll be building off of an existing application from a previous post <a href="http://androidkennel.org/?p=1402">here</a>. In that post, we learned how to&nbsp;access the&nbsp;Internet and pull weather data from OpenWeatherMap given a specific latitude and longitude. We’re going to extend that app, and,&nbsp;instead of providing a latitude and longitude, the system will grab the user’s last known location and we’ll use that as the location to send to OpenWeatherMap!</p><div class="zva-content-course">    <a class="zvapfa_link" href="https://academy.zenva.com/product/python-mini-degree/?zva_src=https://androidkennel.org-za-ad-plugin">
    <img src="./How to get the User Location in Android Tutorial – Zenva _ Android Kennel_files/Phython-CS-V3-257x144.png" title="Python Mini-Degree - 12 Courses to Learn and Master Python">
    </a>  
    <div class="zvapfa_desc">Successfully funded on Kickstarter by +400 backers!
A Project-Based Approach to Becoming a Python Programming Expert


The Python Mini-Degree is a bundle of 12 online video courses, that go all the wa...</div>
    <a class="zvapfa_link" href="https://academy.zenva.com/product/python-mini-degree/?zva_src=https://androidkennel.org-za-ad-plugin">
    <span class="zvapfa_title">Python Mini-Degree - 12 Courses to Learn and Master Python</span>
    </a>
    
    <div class="zvapfa_price">
        <strike>$495</strike> $79        </div>   
    <div class="zvapfa_btn_container">
        <a href="https://academy.zenva.com/product/python-mini-degree/?zva_src=https://androidkennel.org-za-ad-plugin" class="zvapfa_link zvapfa_btn">Learn More</a>
    </div>
    <div id="productid" style="display:none;" productid="57947"></div>
    <script>
    jQuery(document).ready(function($){
        $('.zvapfa_link').unbind();
        $('.zvapfa_link').click(function(e){
            e.preventDefault();

            $.ajax({
                url: "/wp-admin/admin-ajax.php",
                type : 'post',
                data: {
                    action: 'zvapfa-update-stats',
                    prodId: $('#productid').attr('productid')
                },
                success: function( data ) {
                        window.location = $('.zvapfa_link').attr('href');
                }
            });
        });
    });
    </script>
</div><p>Download the source for this project <a href="https://zenva.com/fileExt/576f452f4d7138534b46456b2f566b7769685753754531524c6448773178656c70443254642b697047573362743857675a7079314b756352434954784d6c31672f457636436c436b575776446b6b597a78536658614e67705252716e694d772f4e7135484b616c37336b43327a4f2f6f35725536347a7869474c673439394f52373651646c4975397156376c4d2f4d4e614d6742384541386d3539435332704e624c4a6f30764b4f71496559797534772f5945654434506d3470465a715868723178416b5336726b6b2f496b664e4577434163427a37377a33647768387a32547343775a726f78424d4e47666379764c676468685a78353334362f644c6c3977">here</a>.</p><p>Let’s get started! From the previous mentioned post, run NetworkDemo to double-check that it still works. We’re going to be adding location&nbsp;functionality in this app to grab the user’s location and send it to OpenWeatherMap instead. However, before we do that, we can’t just grab the user’s location without their permission!</p><p>The permission model took a new turn in&nbsp;Android 6.0 Marshmallow to an approach similar to iOS:&nbsp;ask for permission only when needed! In the old Android permission model, developers would post all of the permissions that their app used in the AndroidManifest. When they published their app, users&nbsp;could see all of the permissions that a particular app required&nbsp;on the&nbsp;Play Store. The downside was that before users could install the app, they had to agree&nbsp;to&nbsp;grant the app all of the permissions it requested. Concern arose when simple “Flashlight” apps requested Internet, camera, or audio permissions. Users didn’t like this&nbsp;as they had to debate&nbsp;whether or not to install a particular application based on that one suspicious condition. Browsing through the Play Store, users had to decide whether it was worth the risk of downloading a simple app that, for some reason, needed access to your camera.</p><p>The old permission model&nbsp;also&nbsp;promoted bad practices for&nbsp;developers as well. If your app tried to access some data without the appropriate permission, Android would just crash your app. This can get annoying if you keep&nbsp;forgetting to add permissions. To remedy this headache, instead of carefully&nbsp;thinking what about permissions their app really needs, developers would just add <strong>all</strong> of the permissions or&nbsp;much more than necessary so that they could develop more seamlessly.&nbsp;When they would go to publish, their app would have&nbsp;many unnecessary permissions that users wouldn’t be comfortable with so&nbsp;developers lose&nbsp;user installs and wonder why!</p><p>Starting in Android 6.0 Marshmallow, we now have runtime permissions that developers must declare in&nbsp;<strong>both</strong>&nbsp;the manifest (partly for backwards compatibility) and request them at runtime. This&nbsp;forces developers to only include the permissions they need and gives&nbsp;the&nbsp;users more freedom and security in limiting what&nbsp;your app can do. For example, take the Google Keep app. We can&nbsp;add audio or images to a note, but those permissions aren’t&nbsp;enabled at first.&nbsp;The first time a user clicks on the audio button,&nbsp;the app asks the user whether or not they have permission to access the device’s microphone. Should the user say yes, then the appropriate action occurs. However, if the user declines, we can just disable the functionality that requires that permission. For example, if I didn’t want Keep to access my microphone, I wouldn’t be able to take audio notes until I tap the audio icon again and accept the permission.&nbsp;Also, we can decide when to ask again, as long as we don’t pester the user about&nbsp;accepting a permission.</p><p>We’ll generally want to ask the user for permission when we need it with one exception: if the permission is central to our app, then we can request it&nbsp;right at the start.&nbsp;If the user declines,&nbsp;we should show some rationale as to why this permission is central to our app. Hopefully, this won’t be the case since our app’s purpose will be clear enough that users will understand why we need a particular permission.</p><p>In our case, location is obviously central to our application so we can just request our permission in
<span id="crayon-5a07e15de464a913692005" class="crayon-syntax crayon-syntax-inline  crayon-theme-eclipse crayon-theme-eclipse-inline crayon-font-monospace" style="font-size: 12px !important; line-height: 18px !important;font-size: 12px !important;"><span class="crayon-pre crayon-code" style="font-size: 12px !important; line-height: 18px !important;font-size: 12px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><span class="crayon-e">onCreate</span><span class="crayon-sy">(</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">)</span></span></span>&nbsp;. Add the following code to the method.</p><div id="crayon-5a07e15de465a454713863" class="crayon-syntax crayon-theme-eclipse crayon-font-monospace crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style="margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 18px !important; height: auto;"><div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly="" style="tab-size: 4; font-size: 12px !important; line-height: 18px !important; z-index: 0; opacity: 0; overflow: hidden;">if (ContextCompat.checkSelfPermission(this, Manifest.permission.ACCESS_COARSE_LOCATION)
        != PackageManager.PERMISSION_GRANTED) {
    ActivityCompat.requestPermissions(this, new String[] { Manifest.permission.ACCESS_COARSE_LOCATION },
            PERMISSION_ACCESS_COARSE_LOCATION);
}</textarea></div><div class="crayon-main" style="position: relative; z-index: 1; overflow: hidden;"><table class="crayon-table"><tbody><tr class="crayon-row"><td class="crayon-nums " data-settings="show"><div class="crayon-nums-content" style="font-size: 12px !important; line-height: 18px !important;"><div class="crayon-num" data-line="crayon-5a07e15de465a454713863-1">1</div><div class="crayon-num" data-line="crayon-5a07e15de465a454713863-2">2</div><div class="crayon-num" data-line="crayon-5a07e15de465a454713863-3">3</div><div class="crayon-num" data-line="crayon-5a07e15de465a454713863-4">4</div><div class="crayon-num" data-line="crayon-5a07e15de465a454713863-5">5</div></div></td><td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 18px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5a07e15de465a454713863-1"><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">ContextCompat</span><span class="crayon-sy">.</span><span class="crayon-e">checkSelfPermission</span><span class="crayon-sy">(</span><span class="crayon-r">this</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">Manifest</span><span class="crayon-sy">.</span><span class="crayon-v">permission</span><span class="crayon-sy">.</span><span class="crayon-v">ACCESS_COARSE_LOCATION</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5a07e15de465a454713863-2"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-o">!=</span><span class="crayon-h"> </span><span class="crayon-v">PackageManager</span><span class="crayon-sy">.</span><span class="crayon-v">PERMISSION_GRANTED</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5a07e15de465a454713863-3"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">ActivityCompat</span><span class="crayon-sy">.</span><span class="crayon-e">requestPermissions</span><span class="crayon-sy">(</span><span class="crayon-r">this</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-r">new</span><span class="crayon-h"> </span><span class="crayon-t">String</span><span class="crayon-sy">[</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-sy">{</span><span class="crayon-h"> </span><span class="crayon-v">Manifest</span><span class="crayon-sy">.</span><span class="crayon-v">permission</span><span class="crayon-sy">.</span><span class="crayon-v">ACCESS_COARSE</span><span class="crayon-sy">_</span>LOCATION<span class="crayon-h"> </span><span class="crayon-sy">}</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5a07e15de465a454713863-4"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">PERMISSION_ACCESS_COARSE_LOCATION</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a07e15de465a454713863-5"><span class="crayon-sy">}</span></div></div></td></tr></tbody></table></div></div><p>What we’re doing is&nbsp;first&nbsp;checking to see if the coarse permission location&nbsp;isn’t already granted. If it isn’t then we need to request it. We also need to give it a constant as an&nbsp;identifier in the callback method. We need a callback method as a check the result of the&nbsp;request. This is called
<span id="crayon-5a07e15de4663622817116" class="crayon-syntax crayon-syntax-inline  crayon-theme-eclipse crayon-theme-eclipse-inline crayon-font-monospace" style="font-size: 12px !important; line-height: 18px !important;font-size: 12px !important;"><span class="crayon-pre crayon-code" style="font-size: 12px !important; line-height: 18px !important;font-size: 12px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><span class="crayon-e">onRequestPermissionResult</span><span class="crayon-sy">(</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">)</span></span></span>&nbsp; and we need to override it as the following.</p><div id="crayon-5a07e15de466d852323830" class="crayon-syntax crayon-theme-eclipse crayon-font-monospace crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style="margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 18px !important; height: auto;"><div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly="" style="tab-size: 4; font-size: 12px !important; line-height: 18px !important; z-index: 0; opacity: 0; overflow: hidden;">@Override
public void onRequestPermissionsResult(int requestCode, String[] permissions, int[] grantResults) {
    switch (requestCode) {
        case PERMISSION_ACCESS_COARSE_LOCATION:
            if (grantResults.length &gt; 0 &amp;&amp; grantResults[0] == PackageManager.PERMISSION_GRANTED) {
                // All good!
            } else {
                Toast.makeText(this, "Need your location!", Toast.LENGTH_SHORT).show();
            }

            break;
    }
}</textarea></div><div class="crayon-main" style="position: relative; z-index: 1; overflow: hidden;"><table class="crayon-table"><tbody><tr class="crayon-row"><td class="crayon-nums " data-settings="show"><div class="crayon-nums-content" style="font-size: 12px !important; line-height: 18px !important;"><div class="crayon-num" data-line="crayon-5a07e15de466d852323830-1">1</div><div class="crayon-num" data-line="crayon-5a07e15de466d852323830-2">2</div><div class="crayon-num" data-line="crayon-5a07e15de466d852323830-3">3</div><div class="crayon-num" data-line="crayon-5a07e15de466d852323830-4">4</div><div class="crayon-num" data-line="crayon-5a07e15de466d852323830-5">5</div><div class="crayon-num" data-line="crayon-5a07e15de466d852323830-6">6</div><div class="crayon-num" data-line="crayon-5a07e15de466d852323830-7">7</div><div class="crayon-num" data-line="crayon-5a07e15de466d852323830-8">8</div><div class="crayon-num" data-line="crayon-5a07e15de466d852323830-9">9</div><div class="crayon-num" data-line="crayon-5a07e15de466d852323830-10">10</div><div class="crayon-num" data-line="crayon-5a07e15de466d852323830-11">11</div><div class="crayon-num" data-line="crayon-5a07e15de466d852323830-12">12</div><div class="crayon-num" data-line="crayon-5a07e15de466d852323830-13">13</div></div></td><td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 18px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5a07e15de466d852323830-1"><span class="crayon-n">@Override</span></div><div class="crayon-line" id="crayon-5a07e15de466d852323830-2"><span class="crayon-m">public</span><span class="crayon-h"> </span><span class="crayon-t">void</span><span class="crayon-h"> </span><span class="crayon-e">onRequestPermissionsResult</span><span class="crayon-sy">(</span><span class="crayon-t">int</span><span class="crayon-h"> </span><span class="crayon-v">requestCode</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-t">String</span><span class="crayon-sy">[</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-v">permissions</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-t">int</span><span class="crayon-sy">[</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-v">grantResults</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5a07e15de466d852323830-3"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">switch</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">requestCode</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5a07e15de466d852323830-4"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">case</span><span class="crayon-h"> </span><span class="crayon-v">PERMISSION_ACCESS_COARSE_LOCATION</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5a07e15de466d852323830-5"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">grantResults</span><span class="crayon-sy">.</span><span class="crayon-v">length</span><span class="crayon-h"> </span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-cn">0</span><span class="crayon-h"> </span><span class="crayon-o">&amp;&amp;</span><span class="crayon-h"> </span><span class="crayon-v">grantResults</span><span class="crayon-sy">[</span><span class="crayon-cn">0</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-o">==</span><span class="crayon-h"> </span><span class="crayon-v">PackageManager</span><span class="crayon-sy">.</span><span class="crayon-v">PERMISSION_GRANTED</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5a07e15de466d852323830-6"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">// All good!</span></div><div class="crayon-line" id="crayon-5a07e15de466d852323830-7"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span><span class="crayon-h"> </span><span class="crayon-st">else</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5a07e15de466d852323830-8"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">Toast</span><span class="crayon-sy">.</span><span class="crayon-e">makeText</span><span class="crayon-sy">(</span><span class="crayon-r">this</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-s">"Need your location!"</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">Toast</span><span class="crayon-sy">.</span><span class="crayon-v">LENGTH_SHORT</span><span class="crayon-sy">)</span><span class="crayon-sy">.</span><span class="crayon-e">show</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a07e15de466d852323830-9"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line" id="crayon-5a07e15de466d852323830-10">&nbsp;</div><div class="crayon-line" id="crayon-5a07e15de466d852323830-11"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">break</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a07e15de466d852323830-12"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line" id="crayon-5a07e15de466d852323830-13"><span class="crayon-sy">}</span></div></div></td></tr></tbody></table></div></div><p>We perform a switch-case on the request code and check if the resulting array is greater than zero. If so, we check if the first (and only)&nbsp;permission was granted. If so, we’re good to go! If not, then we tell the user.&nbsp;As I mentioned before, there are more robust ways of doing this, but this method will suffice for now.</p><p>Now that we have permission to&nbsp;grab the user’s location, let’s actually do that and send it to OpenWeatherMap. We’ll have to refactor our existing code, but we first need to learn how to get location.&nbsp;The&nbsp;location APIs are now integrated with Google Play Services and made backwards-compatible all the way back to Android 2.2 Froyo devices.&nbsp;We also have a new FusedLocationProvider that will automatically select the best method of ascertaining the user’s location: either WiFi or GPS. It’s also very easy to use, but we’ll need to make sure we have the Google Play Services support&nbsp;library and add it&nbsp;to our Gradle build file. Open up the SDK&nbsp;manager and go to the SDK Tools tab. Download the latest version of Google Play services. Afterwards, expand the Gradle Scripts item&nbsp;in Android Studio’s&nbsp;Project&nbsp;Explorer on the left. Double-click the build.gradle file for the app module, <span style="text-decoration: underline;"><strong>NOT FOR THE PROJECT</strong></span>! In the dependencies&nbsp;code block, add the following line:
<span id="crayon-5a07e15de4679581429259" class="crayon-syntax crayon-syntax-inline  crayon-theme-eclipse crayon-theme-eclipse-inline crayon-font-monospace" style="font-size: 12px !important; line-height: 18px !important;font-size: 12px !important;"><span class="crayon-pre crayon-code" style="font-size: 12px !important; line-height: 18px !important;font-size: 12px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><span class="crayon-i">compile</span><span class="crayon-h"> </span><span class="crayon-s">'com.google.android.gms:play-services:8.3.0'</span></span></span>&nbsp;. Replace the version number with the most recent one. This will give us access to Google Play services and the FusedLocationProvider&nbsp;API.</p><p>Now let’s go back to our MainActivity.java file. Let’s declare a field for the&nbsp;Google Play Services API client and instantiate it on
<span id="crayon-5a07e15de4680873534460" class="crayon-syntax crayon-syntax-inline  crayon-theme-eclipse crayon-theme-eclipse-inline crayon-font-monospace" style="font-size: 12px !important; line-height: 18px !important;font-size: 12px !important;"><span class="crayon-pre crayon-code" style="font-size: 12px !important; line-height: 18px !important;font-size: 12px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><span class="crayon-e">onCreate</span><span class="crayon-sy">(</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">)</span></span></span>&nbsp; like the&nbsp;following.</p><div id="crayon-5a07e15de4685611320756" class="crayon-syntax crayon-theme-eclipse crayon-font-monospace crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style="margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 18px !important; height: auto;"><div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly="" style="tab-size: 4; font-size: 12px !important; line-height: 18px !important; z-index: 0; opacity: 0; overflow: hidden;">...
private GoogleApiClient googleApiClient;

...

@Override
protected void onCreate(Bundle savedInstanceState) {
    ...

    googleApiClient = new GoogleApiClient.Builder(this, this, this).addApi(LocationServices.API).build();
}</textarea></div><div class="crayon-main" style="position: relative; z-index: 1; overflow: hidden;"><table class="crayon-table"><tbody><tr class="crayon-row"><td class="crayon-nums " data-settings="show"><div class="crayon-nums-content" style="font-size: 12px !important; line-height: 18px !important;"><div class="crayon-num" data-line="crayon-5a07e15de4685611320756-1">1</div><div class="crayon-num" data-line="crayon-5a07e15de4685611320756-2">2</div><div class="crayon-num" data-line="crayon-5a07e15de4685611320756-3">3</div><div class="crayon-num" data-line="crayon-5a07e15de4685611320756-4">4</div><div class="crayon-num" data-line="crayon-5a07e15de4685611320756-5">5</div><div class="crayon-num" data-line="crayon-5a07e15de4685611320756-6">6</div><div class="crayon-num" data-line="crayon-5a07e15de4685611320756-7">7</div><div class="crayon-num" data-line="crayon-5a07e15de4685611320756-8">8</div><div class="crayon-num" data-line="crayon-5a07e15de4685611320756-9">9</div><div class="crayon-num" data-line="crayon-5a07e15de4685611320756-10">10</div><div class="crayon-num" data-line="crayon-5a07e15de4685611320756-11">11</div></div></td><td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 18px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5a07e15de4685611320756-1"><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span></div><div class="crayon-line" id="crayon-5a07e15de4685611320756-2"><span class="crayon-m">private</span><span class="crayon-h"> </span><span class="crayon-e">GoogleApiClient </span><span class="crayon-v">googleApiClient</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a07e15de4685611320756-3">&nbsp;</div><div class="crayon-line" id="crayon-5a07e15de4685611320756-4"><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span></div><div class="crayon-line" id="crayon-5a07e15de4685611320756-5">&nbsp;</div><div class="crayon-line" id="crayon-5a07e15de4685611320756-6"><span class="crayon-sy">@</span><span class="crayon-e">Override</span></div><div class="crayon-line" id="crayon-5a07e15de4685611320756-7"><span class="crayon-m">protected</span><span class="crayon-h"> </span><span class="crayon-t">void</span><span class="crayon-h"> </span><span class="crayon-e">onCreate</span><span class="crayon-sy">(</span><span class="crayon-e">Bundle </span><span class="crayon-v">savedInstanceState</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5a07e15de4685611320756-8"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span></div><div class="crayon-line" id="crayon-5a07e15de4685611320756-9">&nbsp;</div><div class="crayon-line" id="crayon-5a07e15de4685611320756-10"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">googleApiClient</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-r">new</span><span class="crayon-h"> </span><span class="crayon-v">GoogleApiClient</span><span class="crayon-sy">.</span><span class="crayon-e">Builder</span><span class="crayon-sy">(</span><span class="crayon-r">this</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-r">this</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-r">this</span><span class="crayon-sy">)</span><span class="crayon-sy">.</span><span class="crayon-e">addApi</span><span class="crayon-sy">(</span><span class="crayon-v">LocationServices</span><span class="crayon-sy">.</span><span class="crayon-v">API</span><span class="crayon-sy">)</span><span class="crayon-sy">.</span><span class="crayon-e">build</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a07e15de4685611320756-11"><span class="crayon-sy">}</span></div></div></td></tr></tbody></table></div></div><p>We create a new client&nbsp;through the means of a builder inner class. The first parameter is the Context and the next two&nbsp;parameters are callbacks for when the connection succeeded, was suspended, or failed. Then we add&nbsp;the&nbsp;location services&nbsp;API and finally call
<span id="crayon-5a07e15de468a129891804" class="crayon-syntax crayon-syntax-inline  crayon-theme-eclipse crayon-theme-eclipse-inline crayon-font-monospace" style="font-size: 12px !important; line-height: 18px !important;font-size: 12px !important;"><span class="crayon-pre crayon-code" style="font-size: 12px !important; line-height: 18px !important;font-size: 12px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><span class="crayon-e">build</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></span></span>&nbsp;. However, now that we have the client, we need to connect it when we need to use location and disconnect it when we’re not using location to conserve system resources. Ideal places to do this are the
<span id="crayon-5a07e15de468e743027897" class="crayon-syntax crayon-syntax-inline  crayon-theme-eclipse crayon-theme-eclipse-inline crayon-font-monospace" style="font-size: 12px !important; line-height: 18px !important;font-size: 12px !important;"><span class="crayon-pre crayon-code" style="font-size: 12px !important; line-height: 18px !important;font-size: 12px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><span class="crayon-e">onStart</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></span></span>&nbsp; and
<span id="crayon-5a07e15de4693639005044" class="crayon-syntax crayon-syntax-inline  crayon-theme-eclipse crayon-theme-eclipse-inline crayon-font-monospace" style="font-size: 12px !important; line-height: 18px !important;font-size: 12px !important;"><span class="crayon-pre crayon-code" style="font-size: 12px !important; line-height: 18px !important;font-size: 12px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><span class="crayon-e">onStop</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></span></span>&nbsp; methods.&nbsp;The former is called before the&nbsp;Activity is visible on screen and&nbsp;the latter is called after the Activity leaves the screen. These won’t be called when a dialog or other view partially blocks the current activity, else we’d be connecting and disconnecting&nbsp;very frequently and wasting even more resources!&nbsp;Override&nbsp;those lifecycle methods and add the following code inside them to connect and disconnect the&nbsp;API client.</p><div id="crayon-5a07e15de4698638350073" class="crayon-syntax crayon-theme-eclipse crayon-font-monospace crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style="margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 18px !important; height: auto;"><div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly="" style="tab-size: 4; font-size: 12px !important; line-height: 18px !important; z-index: 0; opacity: 0; overflow: hidden;">@Override
protected void onStart() {
    super.onStart();
    if (googleApiClient != null) {
        googleApiClient.connect();
    }
}

@Override
protected void onStop() {
    googleApiClient.disconnect();
    super.onStop();
}</textarea></div><div class="crayon-main" style="position: relative; z-index: 1; overflow: hidden;"><table class="crayon-table"><tbody><tr class="crayon-row"><td class="crayon-nums " data-settings="show"><div class="crayon-nums-content" style="font-size: 12px !important; line-height: 18px !important;"><div class="crayon-num" data-line="crayon-5a07e15de4698638350073-1">1</div><div class="crayon-num" data-line="crayon-5a07e15de4698638350073-2">2</div><div class="crayon-num" data-line="crayon-5a07e15de4698638350073-3">3</div><div class="crayon-num" data-line="crayon-5a07e15de4698638350073-4">4</div><div class="crayon-num" data-line="crayon-5a07e15de4698638350073-5">5</div><div class="crayon-num" data-line="crayon-5a07e15de4698638350073-6">6</div><div class="crayon-num" data-line="crayon-5a07e15de4698638350073-7">7</div><div class="crayon-num" data-line="crayon-5a07e15de4698638350073-8">8</div><div class="crayon-num" data-line="crayon-5a07e15de4698638350073-9">9</div><div class="crayon-num" data-line="crayon-5a07e15de4698638350073-10">10</div><div class="crayon-num" data-line="crayon-5a07e15de4698638350073-11">11</div><div class="crayon-num" data-line="crayon-5a07e15de4698638350073-12">12</div><div class="crayon-num" data-line="crayon-5a07e15de4698638350073-13">13</div></div></td><td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 18px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5a07e15de4698638350073-1"><span class="crayon-n">@Override</span></div><div class="crayon-line" id="crayon-5a07e15de4698638350073-2"><span class="crayon-m">protected</span><span class="crayon-h"> </span><span class="crayon-t">void</span><span class="crayon-h"> </span><span class="crayon-e">onStart</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5a07e15de4698638350073-3"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-r">super</span><span class="crayon-sy">.</span><span class="crayon-e">onStart</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a07e15de4698638350073-4"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">googleApiClient</span><span class="crayon-h"> </span><span class="crayon-o">!=</span><span class="crayon-h"> </span><span class="crayon-t">null</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5a07e15de4698638350073-5"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">googleApiClient</span><span class="crayon-sy">.</span><span class="crayon-e">connect</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a07e15de4698638350073-6"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line" id="crayon-5a07e15de4698638350073-7"><span class="crayon-sy">}</span></div><div class="crayon-line" id="crayon-5a07e15de4698638350073-8">&nbsp;</div><div class="crayon-line" id="crayon-5a07e15de4698638350073-9"><span class="crayon-n">@Override</span></div><div class="crayon-line" id="crayon-5a07e15de4698638350073-10"><span class="crayon-m">protected</span><span class="crayon-h"> </span><span class="crayon-t">void</span><span class="crayon-h"> </span><span class="crayon-e">onStop</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5a07e15de4698638350073-11"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">googleApiClient</span><span class="crayon-sy">.</span><span class="crayon-e">disconnect</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a07e15de4698638350073-12"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-r">super</span><span class="crayon-sy">.</span><span class="crayon-e">onStop</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a07e15de4698638350073-13"><span class="crayon-sy">}</span></div></div></td></tr></tbody></table></div></div><p>Now that we have the connection set up, we can look at the most important method for&nbsp;Google Play services:
<span id="crayon-5a07e15de469d615419170" class="crayon-syntax crayon-syntax-inline  crayon-theme-eclipse crayon-theme-eclipse-inline crayon-font-monospace" style="font-size: 12px !important; line-height: 18px !important;font-size: 12px !important;"><span class="crayon-pre crayon-code" style="font-size: 12px !important; line-height: 18px !important;font-size: 12px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><span class="crayon-e">onConnected</span><span class="crayon-sy">(</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">)</span></span></span>&nbsp;. This method is called when we’ve successfully connected to Google Play services. Beyond this point, we can use any of the APIs we declared when we were building the object.&nbsp;We&nbsp;should first check&nbsp;if the user gave the permission to use location services in the same&nbsp;fashion as the
<span id="crayon-5a07e15de46a2512713706" class="crayon-syntax crayon-syntax-inline  crayon-theme-eclipse crayon-theme-eclipse-inline crayon-font-monospace" style="font-size: 12px !important; line-height: 18px !important;font-size: 12px !important;"><span class="crayon-pre crayon-code" style="font-size: 12px !important; line-height: 18px !important;font-size: 12px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><span class="crayon-e">onRequestPermissionsResult</span><span class="crayon-sy">(</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">)</span></span></span>&nbsp; method. Then we can&nbsp;get the user’s last known location and&nbsp;run the code to fetch the weather. We can implement&nbsp;the method like the following.</p><div id="crayon-5a07e15de46a7685159571" class="crayon-syntax crayon-theme-eclipse crayon-font-monospace crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style="margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 18px !important; height: auto;"><div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly="" style="tab-size: 4; font-size: 12px !important; line-height: 18px !important; z-index: 0; opacity: 0; overflow: hidden;">@Override
public void onConnected(Bundle bundle) {

    if (ContextCompat.checkSelfPermission(this, Manifest.permission.ACCESS_COARSE_LOCATION)
            == PackageManager.PERMISSION_GRANTED) {
        Location lastLocation = LocationServices.FusedLocationApi.getLastLocation(googleApiClient);

        double lat = lastLocation.getLatitude(), lon = lastLocation.getLongitude();
        String units = "imperial";
        String url = String.format("http://api.openweathermap.org/data/2.5/weather?lat=%f&amp;lon=%f&amp;units=%s&amp;appid=%s",
                lat, lon, units, APP_ID);
        new GetWeatherTask(textView).execute(url);
    }
}</textarea></div><div class="crayon-main" style="position: relative; z-index: 1; overflow: hidden;"><table class="crayon-table"><tbody><tr class="crayon-row"><td class="crayon-nums " data-settings="show"><div class="crayon-nums-content" style="font-size: 12px !important; line-height: 18px !important;"><div class="crayon-num" data-line="crayon-5a07e15de46a7685159571-1">1</div><div class="crayon-num" data-line="crayon-5a07e15de46a7685159571-2">2</div><div class="crayon-num" data-line="crayon-5a07e15de46a7685159571-3">3</div><div class="crayon-num" data-line="crayon-5a07e15de46a7685159571-4">4</div><div class="crayon-num" data-line="crayon-5a07e15de46a7685159571-5">5</div><div class="crayon-num" data-line="crayon-5a07e15de46a7685159571-6">6</div><div class="crayon-num" data-line="crayon-5a07e15de46a7685159571-7">7</div><div class="crayon-num" data-line="crayon-5a07e15de46a7685159571-8">8</div><div class="crayon-num" data-line="crayon-5a07e15de46a7685159571-9">9</div><div class="crayon-num" data-line="crayon-5a07e15de46a7685159571-10">10</div><div class="crayon-num" data-line="crayon-5a07e15de46a7685159571-11">11</div><div class="crayon-num" data-line="crayon-5a07e15de46a7685159571-12">12</div><div class="crayon-num" data-line="crayon-5a07e15de46a7685159571-13">13</div><div class="crayon-num" data-line="crayon-5a07e15de46a7685159571-14">14</div></div></td><td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 18px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5a07e15de46a7685159571-1"><span class="crayon-n">@Override</span></div><div class="crayon-line" id="crayon-5a07e15de46a7685159571-2"><span class="crayon-m">public</span><span class="crayon-h"> </span><span class="crayon-t">void</span><span class="crayon-h"> </span><span class="crayon-e">onConnected</span><span class="crayon-sy">(</span><span class="crayon-e">Bundle </span><span class="crayon-v">bundle</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5a07e15de46a7685159571-3">&nbsp;</div><div class="crayon-line" id="crayon-5a07e15de46a7685159571-4"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">ContextCompat</span><span class="crayon-sy">.</span><span class="crayon-e">checkSelfPermission</span><span class="crayon-sy">(</span><span class="crayon-r">this</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">Manifest</span><span class="crayon-sy">.</span><span class="crayon-v">permission</span><span class="crayon-sy">.</span><span class="crayon-v">ACCESS_COARSE_LOCATION</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5a07e15de46a7685159571-5"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-o">==</span><span class="crayon-h"> </span><span class="crayon-v">PackageManager</span><span class="crayon-sy">.</span><span class="crayon-v">PERMISSION_GRANTED</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5a07e15de46a7685159571-6"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">Location </span><span class="crayon-v">lastLocation</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">LocationServices</span><span class="crayon-sy">.</span><span class="crayon-v">FusedLocationApi</span><span class="crayon-sy">.</span><span class="crayon-e">getLastLocation</span><span class="crayon-sy">(</span><span class="crayon-v">googleApiClient</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a07e15de46a7685159571-7">&nbsp;</div><div class="crayon-line" id="crayon-5a07e15de46a7685159571-8"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-t">double</span><span class="crayon-h"> </span><span class="crayon-v">lat</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">lastLocation</span><span class="crayon-sy">.</span><span class="crayon-e">getLatitude</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">lon</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">lastLocation</span><span class="crayon-sy">.</span><span class="crayon-e">getLongitude</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a07e15de46a7685159571-9"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-t">String</span><span class="crayon-h"> </span><span class="crayon-v">units</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">"imperial"</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a07e15de46a7685159571-10"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-t">String</span><span class="crayon-h"> </span><span class="crayon-v">url</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-t">String</span><span class="crayon-sy">.</span><span class="crayon-e">format</span><span class="crayon-sy">(</span><span class="crayon-s">"http://api.openweathermap.org/data/2.5/weather?lat=%f&amp;lon=%f&amp;units=%s&amp;appid=%s"</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5a07e15de46a7685159571-11"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">lat</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">lon</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">units</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">APP_ID</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a07e15de46a7685159571-12"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-r">new</span><span class="crayon-h"> </span><span class="crayon-e">GetWeatherTask</span><span class="crayon-sy">(</span><span class="crayon-v">textView</span><span class="crayon-sy">)</span><span class="crayon-sy">.</span><span class="crayon-e">execute</span><span class="crayon-sy">(</span><span class="crayon-v">url</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a07e15de46a7685159571-13"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line" id="crayon-5a07e15de46a7685159571-14"><span class="crayon-sy">}</span></div></div></td></tr></tbody></table></div></div><p>Notice that we can retrieve the user’s last location very simply using the FusedLocationAPI. We then extract the latitude and longitude&nbsp;from the Location object and execute the task. <b>Note:</b>&nbsp;we know need a field that store the main textView of&nbsp;the screen&nbsp;so that we can grab&nbsp;a reference&nbsp;to the textView in
<span id="crayon-5a07e15de46ac799688586" class="crayon-syntax crayon-syntax-inline  crayon-theme-eclipse crayon-theme-eclipse-inline crayon-font-monospace" style="font-size: 12px !important; line-height: 18px !important;font-size: 12px !important;"><span class="crayon-pre crayon-code" style="font-size: 12px !important; line-height: 18px !important;font-size: 12px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><span class="crayon-e">onCreate</span><span class="crayon-sy">(</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">)</span></span></span>&nbsp; for efficiency reasons. We can do this using&nbsp;standard procedure:
<span id="crayon-5a07e15de46b0655907732" class="crayon-syntax crayon-syntax-inline  crayon-theme-eclipse crayon-theme-eclipse-inline crayon-font-monospace" style="font-size: 12px !important; line-height: 18px !important;font-size: 12px !important;"><span class="crayon-pre crayon-code" style="font-size: 12px !important; line-height: 18px !important;font-size: 12px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><span class="crayon-v">textView</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">TextView</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-e">findViewById</span><span class="crayon-sy">(</span><span class="crayon-v">R</span><span class="crayon-sy">.</span><span class="crayon-v">id</span><span class="crayon-sy">.</span><span class="crayon-v">textView</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></span></span>&nbsp;.</p><p>There’s just one last thing we have to do before we can run this application. We need to make sure our emulator supports Google Play services. We can do this by opening up the SDK manager once more and downloading a system image that says “Google APIs” in the title. Create a new AVD from that system image and we should be good to go!&nbsp;After we’ve done all of this, we should have a complete application&nbsp;and it will ask for&nbsp;your&nbsp;location and then display&nbsp;the current weather at that latitude and longitude! Here are some screenshots below.<a href="https://cdnandroidkennel.azureedge.net/wp-content/uploads/2015/11/Location-%E2%80%93-1.png?x64257"><img src="./How to get the User Location in Android Tutorial – Zenva _ Android Kennel_files/1x1.trans.gif" data-lazy-src="https://cdnandroidkennel.azureedge.net/wp-content/uploads/2015/11/Location-–-1-616x1024.png?x64257" class="size-large wp-image-1423 aligncenter" alt="Location – 1" width="616" height="1024" srcset="https://cdnandroidkennel.azureedge.net/wp-content/uploads/2015/11/Location-–-1-616x1024.png?x64257 616w, https://cdnandroidkennel.azureedge.net/wp-content/uploads/2015/11/Location-–-1-181x300.png?x64257 181w, https://cdnandroidkennel.azureedge.net/wp-content/uploads/2015/11/Location-–-1-373x619.png?x64257 373w, https://cdnandroidkennel.azureedge.net/wp-content/uploads/2015/11/Location-–-1.png?x64257 1076w" sizes="(max-width: 616px) 100vw, 616px"><noscript>&lt;img
class="size-large wp-image-1423 aligncenter" src="https://cdnandroidkennel.azureedge.net/wp-content/uploads/2015/11/Location-–-1-616x1024.png?x64257" alt="Location –&nbsp;1" width="616" height="1024" srcset="https://cdnandroidkennel.azureedge.net/wp-content/uploads/2015/11/Location-–-1-616x1024.png?x64257 616w, https://cdnandroidkennel.azureedge.net/wp-content/uploads/2015/11/Location-–-1-181x300.png?x64257 181w, https://cdnandroidkennel.azureedge.net/wp-content/uploads/2015/11/Location-–-1-373x619.png?x64257 373w, https://cdnandroidkennel.azureedge.net/wp-content/uploads/2015/11/Location-–-1.png?x64257 1076w" sizes="(max-width: 616px) 100vw, 616px" /&gt;</noscript></a><a href="https://cdnandroidkennel.azureedge.net/wp-content/uploads/2015/11/AsyncTask-%E2%80%93-2.png?x64257"><br>
</a> <a href="https://cdnandroidkennel.azureedge.net/wp-content/uploads/2015/11/Location-%E2%80%93-2.png?x64257"><img src="./How to get the User Location in Android Tutorial – Zenva _ Android Kennel_files/1x1.trans.gif" data-lazy-src="https://cdnandroidkennel.azureedge.net/wp-content/uploads/2015/11/Location-–-2-576x1024.png?x64257" class="size-large wp-image-1424 aligncenter" alt="Location – 2" width="576" height="1024" srcset="https://cdnandroidkennel.azureedge.net/wp-content/uploads/2015/11/Location-–-2-576x1024.png?x64257 576w, https://cdnandroidkennel.azureedge.net/wp-content/uploads/2015/11/Location-–-2-169x300.png?x64257 169w, https://cdnandroidkennel.azureedge.net/wp-content/uploads/2015/11/Location-–-2-348x619.png?x64257 348w, https://cdnandroidkennel.azureedge.net/wp-content/uploads/2015/11/Location-–-2.png?x64257 1080w" sizes="(max-width: 576px) 100vw, 576px"><noscript>&lt;img
class="size-large wp-image-1424 aligncenter" src="https://cdnandroidkennel.azureedge.net/wp-content/uploads/2015/11/Location-–-2-576x1024.png?x64257" alt="Location – 2" width="576" height="1024" srcset="https://cdnandroidkennel.azureedge.net/wp-content/uploads/2015/11/Location-–-2-576x1024.png?x64257 576w, https://cdnandroidkennel.azureedge.net/wp-content/uploads/2015/11/Location-–-2-169x300.png?x64257 169w, https://cdnandroidkennel.azureedge.net/wp-content/uploads/2015/11/Location-–-2-348x619.png?x64257 348w, https://cdnandroidkennel.azureedge.net/wp-content/uploads/2015/11/Location-–-2.png?x64257 1080w" sizes="(max-width: 576px) 100vw, 576px" /&gt;</noscript></a></p><h2>Conclusion</h2><p>In this post, we&nbsp;learned&nbsp;about&nbsp;Android&nbsp;Marshmallow’s new runtime permissions model&nbsp;that asks the user&nbsp;for permission only when needed, not all up front. We also&nbsp;covered how to connect to&nbsp;Google Play Services.&nbsp;Many of Android’s newer APIs, like location services, will require the Google Play Services configuration. Finally, we used the FusedLocationProvider API to gain access the the user’s last known location and sent that through to OpenWeatherMap to give the user the current weather at their current location.</p><h2>FAQ</h2><p>Why is&nbsp;the location always null?</p><p>Make sure that&nbsp;you are connected to the internet and&nbsp;that location is turned on. For anyone integrating location into their code, remember that that the GoogleApiClient could connect before we have permission or vice-versa! Do not try to fix this by&nbsp;using infinite loops! Try putting&nbsp;location-sensitive code into another method and&nbsp;call it in a way that the ordering of callbacks&nbsp;leads to the same result. In other words,&nbsp;use that method call so that&nbsp;the&nbsp;app works regardless of if we connect to Google Play Services or get permission first.</p></div><div class="author-info"><h2 class="author-heading">Published by</h2><div class="author-avatar">
<img src="./How to get the User Location in Android Tutorial – Zenva _ Android Kennel_files/1x1.trans.gif" data-lazy-src="https://secure.gravatar.com/avatar/ba84fa0f6814411b1a060d07ea2f1950?s=56&amp;d=monsterid&amp;r=g" alt="" srcset="https://secure.gravatar.com/avatar/ba84fa0f6814411b1a060d07ea2f1950?s=112&amp;d=monsterid&amp;r=g 2x" class="avatar avatar-56 photo" height="56" width="56"><noscript>&lt;img
alt='' src='https://secure.gravatar.com/avatar/ba84fa0f6814411b1a060d07ea2f1950?s=56&amp;#038;d=monsterid&amp;#038;r=g' srcset="https://secure.gravatar.com/avatar/ba84fa0f6814411b1a060d07ea2f1950?s=112&amp;amp;d=monsterid&amp;amp;r=g 2x" class='avatar avatar-56 photo' height='56' width='56' /&gt;</noscript></div><div class="author-description"><h3 class="author-title">Mohit Deshpande</h3><p class="author-bio">
Mohit Deshpande is a professional mobile application developer, contractor, and instructor. He started programming at the age of eleven. During the great mobile revolution, he shifted focus to developing mobile apps with his first Android app running on a Samsung Galaxy S1 running Android 2.1 Eclair. Since then, he has been involved in industry and research. He is a computer science and engineering student at The Ohio State University and works for the Department of Computer Science and Engineering as a researcher.			<a class="author-link" href="https://androidkennel.org/author/mohitd2000/" rel="author">
View all posts by Mohit Deshpande			</a></p></div></div><div class="author-info"><h2 class="author-heading">Share this article</h2><div class="share-area"><a class="share-link" target="_blank" href="https://twitter.com/intent/tweet?url=https%3A%2F%2Fandroidkennel.org%2Fandroid-tutorial-getting-the-users-location%2F&amp;text=How+to+get+the+User+Location+in+Android+Tutorial"></a>
<a class="share-link" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Fandroidkennel.org%2Fandroid-tutorial-getting-the-users-location%2F"></a></div></div><footer class="entry-footer">
<span class="posted-on"><span class="screen-reader-text">Posted on </span><a href="https://androidkennel.org/android-tutorial-getting-the-users-location/" rel="bookmark"><time class="entry-date published" datetime="2016-01-12T08:30:47+00:00">12/01/2016</time><time class="updated" datetime="2017-06-17T21:58:51+00:00">17/06/2017</time></a></span><span class="byline"><span class="author vcard"><span class="screen-reader-text">Author </span><a class="url fn n" href="https://androidkennel.org/author/mohitd2000/">Mohit Deshpande</a></span></span><span class="cat-links"><span class="screen-reader-text">Categories </span><a href="https://androidkennel.org/category/android-tutorials/" rel="category tag">Android Development</a></span><span class="tags-links"><span class="screen-reader-text">Tags </span><a href="https://androidkennel.org/tag/activity/" rel="tag">activity</a>, <a href="https://androidkennel.org/tag/android/" rel="tag">android</a>, <a href="https://androidkennel.org/tag/google_play_services/" rel="tag">google_play_services</a>, <a href="https://androidkennel.org/tag/gradle/" rel="tag">gradle</a>, <a href="https://androidkennel.org/tag/java/" rel="tag">java</a>, <a href="https://androidkennel.org/tag/location/" rel="tag">location</a>, <a href="https://androidkennel.org/tag/permissions/" rel="tag">permissions</a>, <a href="https://androidkennel.org/tag/textview/" rel="tag">textview</a></span>			</footer></article> <script>window.addEventListener("load",function() {
    //document.getElementById("post-thumbnail").style.visibility = "visible";
    
    setTimeout(function(){
        if(document.getElementById("disqus_thread")) {
            document.getElementById("disqus_thread").style.display = "block";
        }
    }, 8000);    
});</script> <div class="wpdiscuz_top_clearing"></div><div id="comments" class="comments-area"><div id="respond" style="width: 0;height: 0;clear: both;margin: 0;padding: 0;"></div><h3 id="wc-comment-header">Leave a Reply</h3><div id="wpcomm" class="wpdiscuz_unauth"><div class="wc-comment-bar"><p class="wc-comment-title">
<span class="wc_header_text_count">15</span> Comments on "How to get the User Location in Android Tutorial"</p><div class="wpdiscuz_clear"></div></div><div class="wc_social_plugin_wrapper"></div><div class="wpdiscuz-subscribe-bar"><form action="https://androidkennel.org/wp-admin/admin-ajax.php?action=addSubscription" method="post" id="wpdiscuz-subscribe-form"><div class="wpdiscuz-subscribe-form-intro">Notify of</div><div class="wpdiscuz-subscribe-form-option" style="width:40%;">
<select class="wpdiscuz_select" name="wpdiscuzSubscriptionType"><option value="post">new follow-up comments</option><option value="all_comment">new replies to my comments</option>
</select></div><div class="wpdiscuz-item wpdiscuz-subscribe-form-email">
<input class="email" type="email" name="wpdiscuzSubscriptionEmail" required="required" value="" placeholder="Email"></div><div class="wpdiscuz-subscribe-form-button">
<input id="wpdiscuz_subscription_button" type="submit" value="›" name="wpdiscuz_subscription_button"></div>
<input type="hidden" id="wpdiscuz_subscribe_form_nonce" name="wpdiscuz_subscribe_form_nonce" value="43e34004ee"><input type="hidden" name="_wp_http_referer" value="/android-tutorial-getting-the-users-location/">                            <input type="hidden" value="1416" name="wpdiscuzSubscriptionPostId"></form><div class="wpdiscuz_clear"></div></div><div class="wc-form-wrapper wc-main-form-wrapper" id="wc-main-form-wrapper-0_0"><div class="wpdiscuz-comment-message" style="display: block;"></div><form class="wc_comm_form wc_main_comm_form" method="post" enctype="multipart/form-data"><div class="wc-field-comment"><div class="wc-field-avatararea">
<img src="./How to get the User Location in Android Tutorial – Zenva _ Android Kennel_files/1x1.trans.gif" data-lazy-src="https://secure.gravatar.com/avatar/?s=48&amp;d=monsterid&amp;r=g" alt="avatar" srcset="https://secure.gravatar.com/avatar/?s=96&amp;d=monsterid&amp;r=g 2x" class="avatar avatar-48 photo avatar-default" height="48" width="48"><noscript>&lt;img
alt='avatar' src='https://secure.gravatar.com/avatar/?s=48&amp;#038;d=monsterid&amp;#038;r=g' srcset="https://secure.gravatar.com/avatar/?s=96&amp;amp;d=monsterid&amp;amp;r=g 2x" class='avatar avatar-48 photo avatar-default' height='48' width='48' /&gt;</noscript></div><div class="wpdiscuz-item wc-field-textarea"><div class="wpdiscuz-textarea-wrap "><textarea id="wc-textarea-0_0" placeholder="Join the discussion" required="" name="wc_comment" class="wc_comment wpd-field"></textarea></div></div><div class="clearfix"></div></div><div class="wc-form-footer" style="display: none;"><div class="wpd-form-row"><div class="wpd-form-col-left"><div class="wpdiscuz-item wpd-has-icon"><div class="wpd-field-icon"><i class="fa fa-user"></i></div>
<input required="required" class="wc_name wpd-field" type="text" name="wc_name" value="" placeholder="Name" maxlength="50" pattern=".{3,50}" title=""></div><div class="wpdiscuz-item wpd-has-icon"><div class="wpd-field-icon"><i class="fa fa-at"></i></div>
<input required="required" class="wc_email wpd-field" type="email" name="wc_email" value="" placeholder="Email"></div></div><div class="wpd-form-col-right"><div class="wc-field-captcha wpdiscuz-item"><div class="wc-captcha-input">
<input type="text" maxlength="5" value="" autocomplete="off" required="required" name="wc_captcha" class="wpd-field wc_field_captcha" placeholder="Code" title="Insert the CAPTCHA code"></div><div class="wc-label wc-captcha-label">
<a class="wpdiscuz-nofollow" href="https://androidkennel.org/android-tutorial-getting-the-users-location/#" rel="nofollow"><img alt="wpdiscuz_captcha" class="wc_captcha_img" src="https://androidkennel.org/wp-content/plugins/wpdiscuz/utils/captcha/captcha.php?key=c5a07e15e27c5b" width="80" height="26"></a><a class="wpdiscuz-nofollow wc_captcha_refresh_img" href="https://androidkennel.org/android-tutorial-getting-the-users-location/#" rel="nofollow"><img alt="refresh" class="" src="./How to get the User Location in Android Tutorial – Zenva _ Android Kennel_files/captcha-loading.png" width="16" height="16"></a>
<input type="hidden" id="c5a07e15e27c5b" class="wpdiscuz-cnonce" name="cnonce" value="c5a07e15e27c5b"></div><div class="clearfix"></div></div><div class="wc-field-submit"><div class="wc_notification_checkboxes" style="display:block">
<input id="wc_notification_new_comment-0_0" class="wc_notification_new_comment-0_0" value="comment" type="checkbox" name="wpdiscuz_notification_type"> <label class="wc-label-comment-notify" for="wc_notification_new_comment-0_0">Notify of new replies to this comment</label><br></div>
<input class="wc_comm_submit wc_not_clicked button alt" type="submit" name="submit" value="Post Comment"></div></div><div class="clearfix"></div></div></div><div class="clearfix"></div>
<input type="hidden" class="wpdiscuz_unique_id" value="0_0" name="wpdiscuz_unique_id"></form></div><div id="wpdiscuz_hidden_secondary_form" style="display: none;"><div class="wc-form-wrapper wc-secondary-form-wrapper" id="wc-secondary-form-wrapper-wpdiscuzuniqueid" style="display: none;"><div class="wpdiscuz-comment-message" style="display: block;"></div><div class="wc-secondary-forms-social-content"></div><form class="wc_comm_form wc-secondary-form-wrapper" method="post" enctype="multipart/form-data"><div class="wc-field-comment"><div class="wc-field-avatararea">
<img src="./How to get the User Location in Android Tutorial – Zenva _ Android Kennel_files/saved_resource" alt="avatar" srcset="https://secure.gravatar.com/avatar/?s=96&amp;d=monsterid&amp;r=g 2x" class="avatar avatar-48 photo avatar-default" height="48" width="48" data-lazy-loaded="true" style="display: inline;"><noscript>&lt;img
alt='avatar' src='https://secure.gravatar.com/avatar/?s=48&amp;#038;d=monsterid&amp;#038;r=g' srcset="https://secure.gravatar.com/avatar/?s=96&amp;amp;d=monsterid&amp;amp;r=g 2x" class='avatar avatar-48 photo avatar-default' height='48' width='48' /&gt;</noscript></div><div class="wpdiscuz-item wc-field-textarea"><div class="wpdiscuz-textarea-wrap "><textarea id="wc-textarea-wpdiscuzuniqueid" placeholder="Join the discussion" required="" name="wc_comment" class="wc_comment wpd-field"></textarea></div></div><div class="clearfix"></div></div><div class="wc-form-footer" style="display: none;"><div class="wpd-form-row"><div class="wpd-form-col-left"><div class="wpdiscuz-item wpd-has-icon"><div class="wpd-field-icon"><i class="fa fa-user"></i></div>
<input required="required" class="wc_name wpd-field" type="text" name="wc_name" value="" placeholder="Name" maxlength="50" pattern=".{3,50}" title=""></div><div class="wpdiscuz-item wpd-has-icon"><div class="wpd-field-icon"><i class="fa fa-at"></i></div>
<input required="required" class="wc_email wpd-field" type="email" name="wc_email" value="" placeholder="Email"></div></div><div class="wpd-form-col-right"><div class="wc-field-captcha wpdiscuz-item"><div class="wc-captcha-input">
<input type="text" maxlength="5" value="" autocomplete="off" required="required" name="wc_captcha" class="wpd-field wc_field_captcha" placeholder="Code" title="Insert the CAPTCHA code"></div><div class="wc-label wc-captcha-label">
<a class="wpdiscuz-nofollow" href="https://androidkennel.org/android-tutorial-getting-the-users-location/#" rel="nofollow"><img alt="wpdiscuz_captcha" class="wc_captcha_img" src="https://androidkennel.org/wp-content/plugins/wpdiscuz/utils/captcha/captcha.php?key=c5a07e15e281b7" width="80" height="26"></a><a class="wpdiscuz-nofollow wc_captcha_refresh_img" href="https://androidkennel.org/android-tutorial-getting-the-users-location/#" rel="nofollow"><img alt="refresh" class="" src="./How to get the User Location in Android Tutorial – Zenva _ Android Kennel_files/captcha-loading.png" width="16" height="16"></a>
<input type="hidden" id="c5a07e15e281b7" class="wpdiscuz-cnonce" name="cnonce" value="c5a07e15e281b7"></div><div class="clearfix"></div></div><div class="wc-field-submit"><div class="wc_notification_checkboxes" style="display:block">
<input id="wc_notification_new_comment-wpdiscuzuniqueid" class="wc_notification_new_comment-wpdiscuzuniqueid" value="comment" type="checkbox" name="wpdiscuz_notification_type"> <label class="wc-label-comment-notify" for="wc_notification_new_comment-wpdiscuzuniqueid">Notify of new replies to this comment</label><br></div>
<input class="wc_comm_submit wc_not_clicked button alt" type="submit" name="submit" value="Post Comment"></div></div><div class="clearfix"></div></div></div><div class="clearfix"></div>
<input type="hidden" class="wpdiscuz_unique_id" value="wpdiscuzuniqueid" name="wpdiscuz_unique_id"></form></div></div><div class="wpdiscuz-front-actions"><div class="wpdiscuz-sort-buttons" style="font-size:14px;">Sort by: &nbsp;
<span class="wpdiscuz-sort-button wpdiscuz-date-sort-desc">newest</span> |
<span class="wpdiscuz-sort-button wpdiscuz-date-sort-asc wpdiscuz-sort-button-active">oldest</span>
| <span class="wpdiscuz-sort-button wpdiscuz-vote-sort-up">most voted</span></div></div><div id="wcThreadWrapper" class="wc-thread-wrapper"><div id="wc-comm-99_0" class="wc-comment wc-blog-guest wc_comment_level-1"><div class="wc-comment-left "><img src="./How to get the User Location in Android Tutorial – Zenva _ Android Kennel_files/1x1.trans.gif" data-lazy-src="https://secure.gravatar.com/avatar/75b88b93868d6242b1835338e006db42?s=64&amp;d=monsterid&amp;r=g" alt="silent_thunder" srcset="https://secure.gravatar.com/avatar/75b88b93868d6242b1835338e006db42?s=128&amp;d=monsterid&amp;r=g 2x" class="avatar avatar-64 photo" height="64" width="64"><noscript>&lt;img
alt='silent_thunder' src='https://secure.gravatar.com/avatar/75b88b93868d6242b1835338e006db42?s=64&amp;#038;d=monsterid&amp;#038;r=g' srcset="https://secure.gravatar.com/avatar/75b88b93868d6242b1835338e006db42?s=128&amp;amp;d=monsterid&amp;amp;r=g 2x" class='avatar avatar-64 photo' height='64' width='64' /&gt;</noscript><div class="wc-blog-guest wc-comment-label"><span>Guest</span></div></div><div id="comment-99" class="wc-comment-right "><div class="wc-comment-header"><div class="wc-comment-author ">silent_thunder</div><div class="wc-comment-link"><i class="fa fa-share-alt wc-share-link wpf-cta" aria-hidden="true" title="Share"></i><span class="share_buttons_box"><a class="wc_tw" target="_blank" href="https://twitter.com/intent/tweet?text=Hi%2C+%0AThere+is+no+download+link+for+the+full+code%2C+woul...+&amp;url=https%3A%2F%2Fandroidkennel.org%2Fandroid-tutorial-getting-the-users-location%2F%23comment-99" title=""><i class="fa fa-twitter wpf-cta" aria-hidden="true"></i><span>Share On Twitter</span></a><a class="wc_go" target="_blank" href="https://plus.google.com/share?url=https://androidkennel.org/android-tutorial-getting-the-users-location/" title=""><i class="fa fa-google wpf-cta" aria-hidden="true"></i><span>Share On Google</span></a></span><span class="wc-comment-img-link-wrap"><i class="fa fa-link wc-comment-img-link wpf-cta" aria-hidden="true"></i><span><input type="text" class="wc-comment-link-input" value="https://androidkennel.org/android-tutorial-getting-the-users-location/#comment-99"></span></span></div><div class="wpdiscuz_clear"></div></div><div class="wc-comment-text"><p>Hi,</p><p>There is no download link for the full code, would you please provide one?</p></div><div class="wc-comment-footer"><div class="wc-footer-left"><span class="wc-vote-link wc-up  wc_tooltipster"><i class="fa fa-thumbs-up fa-flip-horizontal wc-vote-img-up"></i><span>You Must Be Logged In To Vote</span></span><span class="wc-vote-result">0</span><span class="wc-vote-link wc-down  wc_tooltipster"><i class="fa fa-thumbs-down wc-vote-img-down"></i><span>You Must Be Logged In To Vote</span></span>&nbsp;<span class="wc-reply-button wc-cta-button" title="Reply"><i class="fa fa-reply" aria-hidden="true"></i> Reply</span></div><div class="wc-footer-right"><div class="wc-comment-date"><i class="fa fa-clock-o" aria-hidden="true"></i>1 year 3 months ago</div><div class="wc-toggle"><i class="fa fa-chevron-up" aria-hidden="true" title="Hide Replies"></i></div></div><div class="wpdiscuz_clear"></div></div></div><div class="wpdiscuz-comment-message"></div><div id="wpdiscuz_form_anchor-99_0" style="clear:both"></div><div id="wc-comm-100_99" class="wc-comment wc-reply wc-blog-user wc-blog-administrator wc_comment_level-2"><div class="wc-comment-left "><a href="https://androidkennel.org/author/fariazz/" target="_blank"><img src="./How to get the User Location in Android Tutorial – Zenva _ Android Kennel_files/1x1.trans.gif" data-lazy-src="https://secure.gravatar.com/avatar/a2a68be80657a4c47efafadd12817d7c?s=64&amp;d=monsterid&amp;r=g" alt="Pablo Farias Navarro" srcset="https://secure.gravatar.com/avatar/a2a68be80657a4c47efafadd12817d7c?s=128&amp;d=monsterid&amp;r=g 2x" class="avatar avatar-64 photo" height="64" width="64"><noscript>&lt;img
alt='Pablo Farias Navarro' src='https://secure.gravatar.com/avatar/a2a68be80657a4c47efafadd12817d7c?s=64&amp;#038;d=monsterid&amp;#038;r=g' srcset="https://secure.gravatar.com/avatar/a2a68be80657a4c47efafadd12817d7c?s=128&amp;amp;d=monsterid&amp;amp;r=g 2x" class='avatar avatar-64 photo' height='64' width='64' /&gt;</noscript></a><div class="wc-blog-user wc-blog-administrator wc-comment-label"><span>Admin</span></div></div><div id="comment-100" class="wc-comment-right "><div class="wc-comment-header"><div class="wc-comment-author "><a rel="nofollow" href="http://zenva.com/" target="_blank">Pablo Farias Navarro</a></div><div class="wc-comment-link"><i class="fa fa-share-alt wc-share-link wpf-cta" aria-hidden="true" title="Share"></i><span class="share_buttons_box"><a class="wc_tw" target="_blank" href="https://twitter.com/intent/tweet?text=Thanks+for+letting+us+know+about+this+issue%21+We%26%238217...+&amp;url=https%3A%2F%2Fandroidkennel.org%2Fandroid-tutorial-getting-the-users-location%2F%23comment-100" title=""><i class="fa fa-twitter wpf-cta" aria-hidden="true"></i><span>Share On Twitter</span></a><a class="wc_go" target="_blank" href="https://plus.google.com/share?url=https://androidkennel.org/android-tutorial-getting-the-users-location/" title=""><i class="fa fa-google wpf-cta" aria-hidden="true"></i><span>Share On Google</span></a></span><span class="wc-comment-img-link-wrap"><i class="fa fa-link wc-comment-img-link wpf-cta" aria-hidden="true"></i><span><input type="text" class="wc-comment-link-input" value="https://androidkennel.org/android-tutorial-getting-the-users-location/#comment-100"></span></span></div><div class="wpdiscuz_clear"></div></div><div class="wc-comment-text"><p>Thanks for letting us know about this issue! We’ve updated the tutorial and included a link to download the full source code.</p></div><div class="wc-comment-footer"><div class="wc-footer-left"><span class="wc-vote-link wc-up  wc_tooltipster"><i class="fa fa-thumbs-up fa-flip-horizontal wc-vote-img-up"></i><span>You Must Be Logged In To Vote</span></span><span class="wc-vote-result">0</span><span class="wc-vote-link wc-down  wc_tooltipster"><i class="fa fa-thumbs-down wc-vote-img-down"></i><span>You Must Be Logged In To Vote</span></span>&nbsp;<span class="wc-reply-button wc-cta-button" title="Reply"><i class="fa fa-reply" aria-hidden="true"></i> Reply</span></div><div class="wc-footer-right"><div class="wc-comment-date"><i class="fa fa-clock-o" aria-hidden="true"></i>1 year 3 months ago</div><div class="wc-toggle wpdiscuz-hidden"><i class="fa fa-chevron-up" aria-hidden="true" title="Hide Replies"></i></div></div><div class="wpdiscuz_clear"></div></div></div><div class="wpdiscuz-comment-message"></div><div id="wpdiscuz_form_anchor-100_99" style="clear:both"></div></div></div><div id="wc-comm-101_0" class="wc-comment wc-blog-guest wc_comment_level-1"><div class="wc-comment-left "><img src="./How to get the User Location in Android Tutorial – Zenva _ Android Kennel_files/1x1.trans.gif" data-lazy-src="https://secure.gravatar.com/avatar/f6bd2707d48188668d32deee5f0867df?s=64&amp;d=monsterid&amp;r=g" alt="Maria Papadopoulou" srcset="https://secure.gravatar.com/avatar/f6bd2707d48188668d32deee5f0867df?s=128&amp;d=monsterid&amp;r=g 2x" class="avatar avatar-64 photo" height="64" width="64"><noscript>&lt;img
alt='Maria Papadopoulou' src='https://secure.gravatar.com/avatar/f6bd2707d48188668d32deee5f0867df?s=64&amp;#038;d=monsterid&amp;#038;r=g' srcset="https://secure.gravatar.com/avatar/f6bd2707d48188668d32deee5f0867df?s=128&amp;amp;d=monsterid&amp;amp;r=g 2x" class='avatar avatar-64 photo' height='64' width='64' /&gt;</noscript><div class="wc-blog-guest wc-comment-label"><span>Guest</span></div></div><div id="comment-101" class="wc-comment-right "><div class="wc-comment-header"><div class="wc-comment-author ">Maria Papadopoulou</div><div class="wc-comment-link"><i class="fa fa-share-alt wc-share-link wpf-cta" aria-hidden="true" title="Share"></i><span class="share_buttons_box"><a class="wc_tw" target="_blank" href="https://twitter.com/intent/tweet?text=I+have+used+this+code+but+never+get+location+at+phone...+&amp;url=https%3A%2F%2Fandroidkennel.org%2Fandroid-tutorial-getting-the-users-location%2F%23comment-101" title=""><i class="fa fa-twitter wpf-cta" aria-hidden="true"></i><span>Share On Twitter</span></a><a class="wc_go" target="_blank" href="https://plus.google.com/share?url=https://androidkennel.org/android-tutorial-getting-the-users-location/" title=""><i class="fa fa-google wpf-cta" aria-hidden="true"></i><span>Share On Google</span></a></span><span class="wc-comment-img-link-wrap"><i class="fa fa-link wc-comment-img-link wpf-cta" aria-hidden="true"></i><span><input type="text" class="wc-comment-link-input" value="https://androidkennel.org/android-tutorial-getting-the-users-location/#comment-101"></span></span></div><div class="wpdiscuz_clear"></div></div><div class="wc-comment-text"><p>I have used this code but never get location at phones with Android 6. Thé location is always null. Even if I allow permission.  I ve tried many examples but nothing. Emulators, devices always null. Is there any idea why? I ve seen it is very common but non of thé possible solutions helped. Nice tutorial by thé way!</p></div><div class="wc-comment-footer"><div class="wc-footer-left"><span class="wc-vote-link wc-up  wc_tooltipster"><i class="fa fa-thumbs-up fa-flip-horizontal wc-vote-img-up"></i><span>You Must Be Logged In To Vote</span></span><span class="wc-vote-result">0</span><span class="wc-vote-link wc-down  wc_tooltipster"><i class="fa fa-thumbs-down wc-vote-img-down"></i><span>You Must Be Logged In To Vote</span></span>&nbsp;<span class="wc-reply-button wc-cta-button" title="Reply"><i class="fa fa-reply" aria-hidden="true"></i> Reply</span></div><div class="wc-footer-right"><div class="wc-comment-date"><i class="fa fa-clock-o" aria-hidden="true"></i>1 year 3 months ago</div><div class="wc-toggle"><i class="fa fa-chevron-up" aria-hidden="true" title="Hide Replies"></i></div></div><div class="wpdiscuz_clear"></div></div></div><div class="wpdiscuz-comment-message"></div><div id="wpdiscuz_form_anchor-101_0" style="clear:both"></div><div id="wc-comm-103_101" class="wc-comment wc-reply wc-blog-user wc-blog-administrator wc_comment_level-2"><div class="wc-comment-left "><a href="https://androidkennel.org/author/fariazz/" target="_blank"><img src="./How to get the User Location in Android Tutorial – Zenva _ Android Kennel_files/1x1.trans.gif" data-lazy-src="https://secure.gravatar.com/avatar/a2a68be80657a4c47efafadd12817d7c?s=64&amp;d=monsterid&amp;r=g" alt="Pablo Farias Navarro" srcset="https://secure.gravatar.com/avatar/a2a68be80657a4c47efafadd12817d7c?s=128&amp;d=monsterid&amp;r=g 2x" class="avatar avatar-64 photo" height="64" width="64"><noscript>&lt;img
alt='Pablo Farias Navarro' src='https://secure.gravatar.com/avatar/a2a68be80657a4c47efafadd12817d7c?s=64&amp;#038;d=monsterid&amp;#038;r=g' srcset="https://secure.gravatar.com/avatar/a2a68be80657a4c47efafadd12817d7c?s=128&amp;amp;d=monsterid&amp;amp;r=g 2x" class='avatar avatar-64 photo' height='64' width='64' /&gt;</noscript></a><div class="wc-blog-user wc-blog-administrator wc-comment-label"><span>Admin</span></div></div><div id="comment-103" class="wc-comment-right "><div class="wc-comment-header"><div class="wc-comment-author "><a rel="nofollow" href="http://zenva.com/" target="_blank">Pablo Farias Navarro</a></div><div class="wc-comment-link"><i class="fa fa-share-alt wc-share-link wpf-cta" aria-hidden="true" title="Share"></i><span class="share_buttons_box"><a class="wc_tw" target="_blank" href="https://twitter.com/intent/tweet?text=Hey+Maria%2C+it%26%238217%3Bs+working+fine+in+our+end.+See+%40t...+&amp;url=https%3A%2F%2Fandroidkennel.org%2Fandroid-tutorial-getting-the-users-location%2F%23comment-103" title=""><i class="fa fa-twitter wpf-cta" aria-hidden="true"></i><span>Share On Twitter</span></a><a class="wc_go" target="_blank" href="https://plus.google.com/share?url=https://androidkennel.org/android-tutorial-getting-the-users-location/" title=""><i class="fa fa-google wpf-cta" aria-hidden="true"></i><span>Share On Google</span></a></span><span class="wc-comment-img-link-wrap"><i class="fa fa-link wc-comment-img-link wpf-cta" aria-hidden="true"></i><span><input type="text" class="wc-comment-link-input" value="https://androidkennel.org/android-tutorial-getting-the-users-location/#comment-103"></span></span></div><div class="wpdiscuz_clear"></div></div><div class="wc-comment-text"><p>Hey Maria, it’s working fine in our end. See @techken:disqus’s response. If you are still having trouble can you share your code?</p></div><div class="wc-comment-footer"><div class="wc-footer-left"><span class="wc-vote-link wc-up  wc_tooltipster"><i class="fa fa-thumbs-up fa-flip-horizontal wc-vote-img-up"></i><span>You Must Be Logged In To Vote</span></span><span class="wc-vote-result">0</span><span class="wc-vote-link wc-down  wc_tooltipster"><i class="fa fa-thumbs-down wc-vote-img-down"></i><span>You Must Be Logged In To Vote</span></span>&nbsp;<span class="wc-reply-button wc-cta-button" title="Reply"><i class="fa fa-reply" aria-hidden="true"></i> Reply</span></div><div class="wc-footer-right"><div class="wc-comment-date"><i class="fa fa-clock-o" aria-hidden="true"></i>1 year 2 months ago</div><div class="wc-toggle wpdiscuz-hidden"><i class="fa fa-chevron-up" aria-hidden="true" title="Hide Replies"></i></div></div><div class="wpdiscuz_clear"></div></div></div><div class="wpdiscuz-comment-message"></div><div id="wpdiscuz_form_anchor-103_101" style="clear:both"></div></div></div><div id="wc-comm-102_0" class="wc-comment wc-blog-guest wc_comment_level-1"><div class="wc-comment-left "><img src="./How to get the User Location in Android Tutorial – Zenva _ Android Kennel_files/1x1.trans.gif" data-lazy-src="https://secure.gravatar.com/avatar/690a18afe81b0dc8fe10e60531c5d1cf?s=64&amp;d=monsterid&amp;r=g" alt="techken" srcset="https://secure.gravatar.com/avatar/690a18afe81b0dc8fe10e60531c5d1cf?s=128&amp;d=monsterid&amp;r=g 2x" class="avatar avatar-64 photo" height="64" width="64"><noscript>&lt;img
alt='techken' src='https://secure.gravatar.com/avatar/690a18afe81b0dc8fe10e60531c5d1cf?s=64&amp;#038;d=monsterid&amp;#038;r=g' srcset="https://secure.gravatar.com/avatar/690a18afe81b0dc8fe10e60531c5d1cf?s=128&amp;amp;d=monsterid&amp;amp;r=g 2x" class='avatar avatar-64 photo' height='64' width='64' /&gt;</noscript><div class="wc-blog-guest wc-comment-label"><span>Guest</span></div></div><div id="comment-102" class="wc-comment-right "><div class="wc-comment-header"><div class="wc-comment-author ">techken</div><div class="wc-comment-link"><i class="fa fa-share-alt wc-share-link wpf-cta" aria-hidden="true" title="Share"></i><span class="share_buttons_box"><a class="wc_tw" target="_blank" href="https://twitter.com/intent/tweet?text=i+tried+it%2C+it+was+working+fine%26%238230%3B%3A-%29%26%238230%3Bjust+...+&amp;url=https%3A%2F%2Fandroidkennel.org%2Fandroid-tutorial-getting-the-users-location%2F%23comment-102" title=""><i class="fa fa-twitter wpf-cta" aria-hidden="true"></i><span>Share On Twitter</span></a><a class="wc_go" target="_blank" href="https://plus.google.com/share?url=https://androidkennel.org/android-tutorial-getting-the-users-location/" title=""><i class="fa fa-google wpf-cta" aria-hidden="true"></i><span>Share On Google</span></a></span><span class="wc-comment-img-link-wrap"><i class="fa fa-link wc-comment-img-link wpf-cta" aria-hidden="true"></i><span><input type="text" class="wc-comment-link-input" value="https://androidkennel.org/android-tutorial-getting-the-users-location/#comment-102"></span></span></div><div class="wpdiscuz_clear"></div></div><div class="wc-comment-text"><p>i tried it, it was working fine…:-)…just create a seperate project and copy the code…run with the latest 24 or 23…it was working..</p><p>You also need to connect internet and location should be on…</p></div><div class="wc-comment-footer"><div class="wc-footer-left"><span class="wc-vote-link wc-up  wc_tooltipster"><i class="fa fa-thumbs-up fa-flip-horizontal wc-vote-img-up"></i><span>You Must Be Logged In To Vote</span></span><span class="wc-vote-result">0</span><span class="wc-vote-link wc-down  wc_tooltipster"><i class="fa fa-thumbs-down wc-vote-img-down"></i><span>You Must Be Logged In To Vote</span></span>&nbsp;<span class="wc-reply-button wc-cta-button" title="Reply"><i class="fa fa-reply" aria-hidden="true"></i> Reply</span></div><div class="wc-footer-right"><div class="wc-comment-date"><i class="fa fa-clock-o" aria-hidden="true"></i>1 year 3 months ago</div><div class="wc-toggle wpdiscuz-hidden"><i class="fa fa-chevron-up" aria-hidden="true" title="Hide Replies"></i></div></div><div class="wpdiscuz_clear"></div></div></div><div class="wpdiscuz-comment-message"></div><div id="wpdiscuz_form_anchor-102_0" style="clear:both"></div></div><div id="wc-comm-111_0" class="wc-comment wc-blog-guest wc_comment_level-1"><div class="wc-comment-left "><img src="./How to get the User Location in Android Tutorial – Zenva _ Android Kennel_files/1x1.trans.gif" data-lazy-src="https://secure.gravatar.com/avatar/1609716e693348c9f8ddef1fa5461bf4?s=64&amp;d=monsterid&amp;r=g" alt="Francisco Vieira" srcset="https://secure.gravatar.com/avatar/1609716e693348c9f8ddef1fa5461bf4?s=128&amp;d=monsterid&amp;r=g 2x" class="avatar avatar-64 photo" height="64" width="64"><noscript>&lt;img
alt='Francisco Vieira' src='https://secure.gravatar.com/avatar/1609716e693348c9f8ddef1fa5461bf4?s=64&amp;#038;d=monsterid&amp;#038;r=g' srcset="https://secure.gravatar.com/avatar/1609716e693348c9f8ddef1fa5461bf4?s=128&amp;amp;d=monsterid&amp;amp;r=g 2x" class='avatar avatar-64 photo' height='64' width='64' /&gt;</noscript><div class="wc-blog-guest wc-comment-label"><span>Guest</span></div></div><div id="comment-111" class="wc-comment-right "><div class="wc-comment-header"><div class="wc-comment-author ">Francisco Vieira</div><div class="wc-comment-link"><i class="fa fa-share-alt wc-share-link wpf-cta" aria-hidden="true" title="Share"></i><span class="share_buttons_box"><a class="wc_tw" target="_blank" href="https://twitter.com/intent/tweet?text=Very+clear+and+very+helpful%2C+thanks+a+lot.%0A...+&amp;url=https%3A%2F%2Fandroidkennel.org%2Fandroid-tutorial-getting-the-users-location%2F%23comment-111" title=""><i class="fa fa-twitter wpf-cta" aria-hidden="true"></i><span>Share On Twitter</span></a><a class="wc_go" target="_blank" href="https://plus.google.com/share?url=https://androidkennel.org/android-tutorial-getting-the-users-location/" title=""><i class="fa fa-google wpf-cta" aria-hidden="true"></i><span>Share On Google</span></a></span><span class="wc-comment-img-link-wrap"><i class="fa fa-link wc-comment-img-link wpf-cta" aria-hidden="true"></i><span><input type="text" class="wc-comment-link-input" value="https://androidkennel.org/android-tutorial-getting-the-users-location/#comment-111"></span></span></div><div class="wpdiscuz_clear"></div></div><div class="wc-comment-text"><p>Very clear and very helpful, thanks a lot.</p></div><div class="wc-comment-footer"><div class="wc-footer-left"><span class="wc-vote-link wc-up  wc_tooltipster"><i class="fa fa-thumbs-up fa-flip-horizontal wc-vote-img-up"></i><span>You Must Be Logged In To Vote</span></span><span class="wc-vote-result">0</span><span class="wc-vote-link wc-down  wc_tooltipster"><i class="fa fa-thumbs-down wc-vote-img-down"></i><span>You Must Be Logged In To Vote</span></span>&nbsp;<span class="wc-reply-button wc-cta-button" title="Reply"><i class="fa fa-reply" aria-hidden="true"></i> Reply</span></div><div class="wc-footer-right"><div class="wc-comment-date"><i class="fa fa-clock-o" aria-hidden="true"></i>1 year 1 month ago</div><div class="wc-toggle"><i class="fa fa-chevron-up" aria-hidden="true" title="Hide Replies"></i></div></div><div class="wpdiscuz_clear"></div></div></div><div class="wpdiscuz-comment-message"></div><div id="wpdiscuz_form_anchor-111_0" style="clear:both"></div><div id="wc-comm-122_111" class="wc-comment wc-reply wc-blog-user wc-blog-administrator wc_comment_level-2"><div class="wc-comment-left "><a href="https://androidkennel.org/author/fariazz/" target="_blank"><img src="./How to get the User Location in Android Tutorial – Zenva _ Android Kennel_files/1x1.trans.gif" data-lazy-src="https://secure.gravatar.com/avatar/a2a68be80657a4c47efafadd12817d7c?s=64&amp;d=monsterid&amp;r=g" alt="Pablo Farias Navarro" srcset="https://secure.gravatar.com/avatar/a2a68be80657a4c47efafadd12817d7c?s=128&amp;d=monsterid&amp;r=g 2x" class="avatar avatar-64 photo" height="64" width="64"><noscript>&lt;img
alt='Pablo Farias Navarro' src='https://secure.gravatar.com/avatar/a2a68be80657a4c47efafadd12817d7c?s=64&amp;#038;d=monsterid&amp;#038;r=g' srcset="https://secure.gravatar.com/avatar/a2a68be80657a4c47efafadd12817d7c?s=128&amp;amp;d=monsterid&amp;amp;r=g 2x" class='avatar avatar-64 photo' height='64' width='64' /&gt;</noscript></a><div class="wc-blog-user wc-blog-administrator wc-comment-label"><span>Admin</span></div></div><div id="comment-122" class="wc-comment-right "><div class="wc-comment-header"><div class="wc-comment-author "><a rel="nofollow" href="http://zenva.com/" target="_blank">Pablo Farias Navarro</a></div><div class="wc-comment-link"><i class="fa fa-share-alt wc-share-link wpf-cta" aria-hidden="true" title="Share"></i><span class="share_buttons_box"><a class="wc_tw" target="_blank" href="https://twitter.com/intent/tweet?text=Thanks+Francisco%21+Glad+to+hear+you+found+it+helpful.%0A...+&amp;url=https%3A%2F%2Fandroidkennel.org%2Fandroid-tutorial-getting-the-users-location%2F%23comment-122" title=""><i class="fa fa-twitter wpf-cta" aria-hidden="true"></i><span>Share On Twitter</span></a><a class="wc_go" target="_blank" href="https://plus.google.com/share?url=https://androidkennel.org/android-tutorial-getting-the-users-location/" title=""><i class="fa fa-google wpf-cta" aria-hidden="true"></i><span>Share On Google</span></a></span><span class="wc-comment-img-link-wrap"><i class="fa fa-link wc-comment-img-link wpf-cta" aria-hidden="true"></i><span><input type="text" class="wc-comment-link-input" value="https://androidkennel.org/android-tutorial-getting-the-users-location/#comment-122"></span></span></div><div class="wpdiscuz_clear"></div></div><div class="wc-comment-text"><p>Thanks Francisco! Glad to hear you found it helpful.</p></div><div class="wc-comment-footer"><div class="wc-footer-left"><span class="wc-vote-link wc-up  wc_tooltipster"><i class="fa fa-thumbs-up fa-flip-horizontal wc-vote-img-up"></i><span>You Must Be Logged In To Vote</span></span><span class="wc-vote-result">0</span><span class="wc-vote-link wc-down  wc_tooltipster"><i class="fa fa-thumbs-down wc-vote-img-down"></i><span>You Must Be Logged In To Vote</span></span>&nbsp;<span class="wc-reply-button wc-cta-button" title="Reply"><i class="fa fa-reply" aria-hidden="true"></i> Reply</span></div><div class="wc-footer-right"><div class="wc-comment-date"><i class="fa fa-clock-o" aria-hidden="true"></i>1 year 18 days ago</div><div class="wc-toggle wpdiscuz-hidden"><i class="fa fa-chevron-up" aria-hidden="true" title="Hide Replies"></i></div></div><div class="wpdiscuz_clear"></div></div></div><div class="wpdiscuz-comment-message"></div><div id="wpdiscuz_form_anchor-122_111" style="clear:both"></div></div></div><div id="wc-comm-119_0" class="wc-comment wc-blog-guest wc_comment_level-1"><div class="wc-comment-left "><img src="./How to get the User Location in Android Tutorial – Zenva _ Android Kennel_files/1x1.trans.gif" data-lazy-src="https://secure.gravatar.com/avatar/973c6454b381db85b75191c61b4d5235?s=64&amp;d=monsterid&amp;r=g" alt="vitorcrdias" srcset="https://secure.gravatar.com/avatar/973c6454b381db85b75191c61b4d5235?s=128&amp;d=monsterid&amp;r=g 2x" class="avatar avatar-64 photo" height="64" width="64"><noscript>&lt;img
alt='vitorcrdias' src='https://secure.gravatar.com/avatar/973c6454b381db85b75191c61b4d5235?s=64&amp;#038;d=monsterid&amp;#038;r=g' srcset="https://secure.gravatar.com/avatar/973c6454b381db85b75191c61b4d5235?s=128&amp;amp;d=monsterid&amp;amp;r=g 2x" class='avatar avatar-64 photo' height='64' width='64' /&gt;</noscript><div class="wc-blog-guest wc-comment-label"><span>Guest</span></div></div><div id="comment-119" class="wc-comment-right "><div class="wc-comment-header"><div class="wc-comment-author "><a rel="nofollow" href="http://www.vitorcrdias.com/" target="_blank">vitorcrdias</a></div><div class="wc-comment-link"><i class="fa fa-share-alt wc-share-link wpf-cta" aria-hidden="true" title="Share"></i><span class="share_buttons_box"><a class="wc_tw" target="_blank" href="https://twitter.com/intent/tweet?text=I+seached+a+lot+about+how+to+build+an+app+that+runs+i...+&amp;url=https%3A%2F%2Fandroidkennel.org%2Fandroid-tutorial-getting-the-users-location%2F%23comment-119" title=""><i class="fa fa-twitter wpf-cta" aria-hidden="true"></i><span>Share On Twitter</span></a><a class="wc_go" target="_blank" href="https://plus.google.com/share?url=https://androidkennel.org/android-tutorial-getting-the-users-location/" title=""><i class="fa fa-google wpf-cta" aria-hidden="true"></i><span>Share On Google</span></a></span><span class="wc-comment-img-link-wrap"><i class="fa fa-link wc-comment-img-link wpf-cta" aria-hidden="true"></i><span><input type="text" class="wc-comment-link-input" value="https://androidkennel.org/android-tutorial-getting-the-users-location/#comment-119"></span></span></div><div class="wpdiscuz_clear"></div></div><div class="wc-comment-text"><p>I seached a lot about how to build an app that runs in background with a UI screen, some way to keep running even after rebooting the phone. Get cell phone number from keyboard, latitude and longitude from gps or network and send these data to a webservice with chooseable time, but can’t find some example… Could you show here?</p></div><div class="wc-comment-footer"><div class="wc-footer-left"><span class="wc-vote-link wc-up  wc_tooltipster"><i class="fa fa-thumbs-up fa-flip-horizontal wc-vote-img-up"></i><span>You Must Be Logged In To Vote</span></span><span class="wc-vote-result">0</span><span class="wc-vote-link wc-down  wc_tooltipster"><i class="fa fa-thumbs-down wc-vote-img-down"></i><span>You Must Be Logged In To Vote</span></span>&nbsp;<span class="wc-reply-button wc-cta-button" title="Reply"><i class="fa fa-reply" aria-hidden="true"></i> Reply</span></div><div class="wc-footer-right"><div class="wc-comment-date"><i class="fa fa-clock-o" aria-hidden="true"></i>1 year 21 days ago</div><div class="wc-toggle wpdiscuz-hidden"><i class="fa fa-chevron-up" aria-hidden="true" title="Hide Replies"></i></div></div><div class="wpdiscuz_clear"></div></div></div><div class="wpdiscuz-comment-message"></div><div id="wpdiscuz_form_anchor-119_0" style="clear:both"></div></div><div id="wc-comm-125_0" class="wc-comment wc-blog-guest wc_comment_level-1"><div class="wc-comment-left "><img src="./How to get the User Location in Android Tutorial – Zenva _ Android Kennel_files/1x1.trans.gif" data-lazy-src="https://secure.gravatar.com/avatar/41afb09dacfa8de9ee6bcff7e3c3ced0?s=64&amp;d=monsterid&amp;r=g" alt="Samy Terki" srcset="https://secure.gravatar.com/avatar/41afb09dacfa8de9ee6bcff7e3c3ced0?s=128&amp;d=monsterid&amp;r=g 2x" class="avatar avatar-64 photo" height="64" width="64"><noscript>&lt;img
alt='Samy Terki' src='https://secure.gravatar.com/avatar/41afb09dacfa8de9ee6bcff7e3c3ced0?s=64&amp;#038;d=monsterid&amp;#038;r=g' srcset="https://secure.gravatar.com/avatar/41afb09dacfa8de9ee6bcff7e3c3ced0?s=128&amp;amp;d=monsterid&amp;amp;r=g 2x" class='avatar avatar-64 photo' height='64' width='64' /&gt;</noscript><div class="wc-blog-guest wc-comment-label"><span>Guest</span></div></div><div id="comment-125" class="wc-comment-right "><div class="wc-comment-header"><div class="wc-comment-author ">Samy Terki</div><div class="wc-comment-link"><i class="fa fa-share-alt wc-share-link wpf-cta" aria-hidden="true" title="Share"></i><span class="share_buttons_box"><a class="wc_tw" target="_blank" href="https://twitter.com/intent/tweet?text=Hi+everyone%2C+I+tried+this+code+but+get+location+retur...+&amp;url=https%3A%2F%2Fandroidkennel.org%2Fandroid-tutorial-getting-the-users-location%2F%23comment-125" title=""><i class="fa fa-twitter wpf-cta" aria-hidden="true"></i><span>Share On Twitter</span></a><a class="wc_go" target="_blank" href="https://plus.google.com/share?url=https://androidkennel.org/android-tutorial-getting-the-users-location/" title=""><i class="fa fa-google wpf-cta" aria-hidden="true"></i><span>Share On Google</span></a></span><span class="wc-comment-img-link-wrap"><i class="fa fa-link wc-comment-img-link wpf-cta" aria-hidden="true"></i><span><input type="text" class="wc-comment-link-input" value="https://androidkennel.org/android-tutorial-getting-the-users-location/#comment-125"></span></span></div><div class="wpdiscuz_clear"></div></div><div class="wc-comment-text"><p>Hi everyone, I tried this code but get location return always null.<br>
Im running on a Android 6.0 API 23</p><p>Sometimes it returns a value but I don’t know why.</p></div><div class="wc-comment-footer"><div class="wc-footer-left"><span class="wc-vote-link wc-up  wc_tooltipster"><i class="fa fa-thumbs-up fa-flip-horizontal wc-vote-img-up"></i><span>You Must Be Logged In To Vote</span></span><span class="wc-vote-result">0</span><span class="wc-vote-link wc-down  wc_tooltipster"><i class="fa fa-thumbs-down wc-vote-img-down"></i><span>You Must Be Logged In To Vote</span></span>&nbsp;<span class="wc-reply-button wc-cta-button" title="Reply"><i class="fa fa-reply" aria-hidden="true"></i> Reply</span></div><div class="wc-footer-right"><div class="wc-comment-date"><i class="fa fa-clock-o" aria-hidden="true"></i>1 year 2 days ago</div><div class="wc-toggle"><i class="fa fa-chevron-up" aria-hidden="true" title="Hide Replies"></i></div></div><div class="wpdiscuz_clear"></div></div></div><div class="wpdiscuz-comment-message"></div><div id="wpdiscuz_form_anchor-125_0" style="clear:both"></div><div id="wc-comm-126_125" class="wc-comment wc-reply wc-blog-guest wc_comment_level-2"><div class="wc-comment-left "><img src="./How to get the User Location in Android Tutorial – Zenva _ Android Kennel_files/1x1.trans.gif" data-lazy-src="https://secure.gravatar.com/avatar/41afb09dacfa8de9ee6bcff7e3c3ced0?s=64&amp;d=monsterid&amp;r=g" alt="Samy Terki" srcset="https://secure.gravatar.com/avatar/41afb09dacfa8de9ee6bcff7e3c3ced0?s=128&amp;d=monsterid&amp;r=g 2x" class="avatar avatar-64 photo" height="64" width="64"><noscript>&lt;img
alt='Samy Terki' src='https://secure.gravatar.com/avatar/41afb09dacfa8de9ee6bcff7e3c3ced0?s=64&amp;#038;d=monsterid&amp;#038;r=g' srcset="https://secure.gravatar.com/avatar/41afb09dacfa8de9ee6bcff7e3c3ced0?s=128&amp;amp;d=monsterid&amp;amp;r=g 2x" class='avatar avatar-64 photo' height='64' width='64' /&gt;</noscript><div class="wc-blog-guest wc-comment-label"><span>Guest</span></div></div><div id="comment-126" class="wc-comment-right "><div class="wc-comment-header"><div class="wc-comment-author ">Samy Terki</div><div class="wc-comment-link"><i class="fa fa-share-alt wc-share-link wpf-cta" aria-hidden="true" title="Share"></i><span class="share_buttons_box"><a class="wc_tw" target="_blank" href="https://twitter.com/intent/tweet?text=By+the+way%2C+this+is+my+code%3A+package+com.example.lafa...+&amp;url=https%3A%2F%2Fandroidkennel.org%2Fandroid-tutorial-getting-the-users-location%2F%23comment-126" title=""><i class="fa fa-twitter wpf-cta" aria-hidden="true"></i><span>Share On Twitter</span></a><a class="wc_go" target="_blank" href="https://plus.google.com/share?url=https://androidkennel.org/android-tutorial-getting-the-users-location/" title=""><i class="fa fa-google wpf-cta" aria-hidden="true"></i><span>Share On Google</span></a></span><span class="wc-comment-img-link-wrap"><i class="fa fa-link wc-comment-img-link wpf-cta" aria-hidden="true"></i><span><input type="text" class="wc-comment-link-input" value="https://androidkennel.org/android-tutorial-getting-the-users-location/#comment-126"></span></span></div><div class="wpdiscuz_clear"></div></div><div class="wc-comment-text">By the way, this is my code: package com.example.lafabriquedumetro.suivichantier; import android.content.pm.PackageManager; import android.location.Location; import android.support.annotation.NonNull; import android.support.annotation.Nullable; import android.support.v4.app.ActivityCompat; import android.support.v4.app.FragmentManager; import android.support.v4.app.FragmentTransaction; import android.support.v4.content.ContextCompat; import android.support.v7.app.AppCompatActivity; import android.os.Bundle; import com.google.android.gms.common.ConnectionResult; import com.google.android.gms.common.api.GoogleApiClient; import com.google.android.gms.location.LocationAvailability; import com.google.android.gms.location.LocationServices; import entity.ConstructionSiteEntity; import entity.ConstructionSitesEntity; import fragment.Launcher; import service.ConstructionSiteService; import android.Manifest; import android.widget.Toast; public class MainActivity extends AppCompatActivity implements GoogleApiClient.ConnectionCallbacks, GoogleApiClient.OnConnectionFailedListener{ private static final int PERMISSION_ACCESS_COARSE_LOCATION = 1; private GoogleApiClient googleApiClient; @Override protected void onCreate(Bundle savedInstanceState) { super.onCreate(savedInstanceState); setContentView(R.layout.activity_main); if (ContextCompat.checkSelfPermission(this, Manifest.permission.ACCESS_COARSE_LOCATION) != PackageManager.PERMISSION_GRANTED) { ActivityCompat.requestPermissions(this, new String[] { Manifest.permission.ACCESS_COARSE_LOCATION }, PERMISSION_ACCESS_COARSE_LOCATION); } googleApiClient = new GoogleApiClient.Builder(this, this, this).addApi(LocationServices.API).build(); final FragmentManager fragmentManager = getSupportFragmentManager();<span id="wpdiscuz-readmore-126_125"><span class="wpdiscuz-hellip">…&nbsp;</span><span class="wpdiscuz-readmore" title="Read more »">Read more »</span></span></div><div class="wc-comment-footer"><div class="wc-footer-left"><span class="wc-vote-link wc-up  wc_tooltipster"><i class="fa fa-thumbs-up fa-flip-horizontal wc-vote-img-up"></i><span>You Must Be Logged In To Vote</span></span><span class="wc-vote-result">0</span><span class="wc-vote-link wc-down  wc_tooltipster"><i class="fa fa-thumbs-down wc-vote-img-down"></i><span>You Must Be Logged In To Vote</span></span>&nbsp;<span class="wc-reply-button wc-cta-button" title="Reply"><i class="fa fa-reply" aria-hidden="true"></i> Reply</span></div><div class="wc-footer-right"><div class="wc-comment-date"><i class="fa fa-clock-o" aria-hidden="true"></i>1 year 2 days ago</div><div class="wc-toggle wpdiscuz-hidden"><i class="fa fa-chevron-up" aria-hidden="true" title="Hide Replies"></i></div></div><div class="wpdiscuz_clear"></div></div></div><div class="wpdiscuz-comment-message"></div><div id="wpdiscuz_form_anchor-126_125" style="clear:both"></div></div><div id="wc-comm-128_125" class="wc-comment wc-reply wc-blog-user wc-blog-post_author wc_comment_level-2"><div class="wc-comment-left "><a href="https://androidkennel.org/author/mohitd2000/" target="_blank"><img src="./How to get the User Location in Android Tutorial – Zenva _ Android Kennel_files/1x1.trans.gif" data-lazy-src="https://secure.gravatar.com/avatar/ba84fa0f6814411b1a060d07ea2f1950?s=64&amp;d=monsterid&amp;r=g" alt="Mohit Deshpande" srcset="https://secure.gravatar.com/avatar/ba84fa0f6814411b1a060d07ea2f1950?s=128&amp;d=monsterid&amp;r=g 2x" class="avatar avatar-64 photo" height="64" width="64"><noscript>&lt;img
alt='Mohit Deshpande' src='https://secure.gravatar.com/avatar/ba84fa0f6814411b1a060d07ea2f1950?s=64&amp;#038;d=monsterid&amp;#038;r=g' srcset="https://secure.gravatar.com/avatar/ba84fa0f6814411b1a060d07ea2f1950?s=128&amp;amp;d=monsterid&amp;amp;r=g 2x" class='avatar avatar-64 photo' height='64' width='64' /&gt;</noscript></a><div class="wc-blog-user wc-blog-post_author wc-comment-label"><span>Author</span></div></div><div id="comment-128" class="wc-comment-right "><div class="wc-comment-header"><div class="wc-comment-author "><a rel="nofollow" href="https://androidkennel.org/author/mohitd2000/" target="_blank">Mohit Deshpande</a></div><div class="wc-comment-link"><i class="fa fa-share-alt wc-share-link wpf-cta" aria-hidden="true" title="Share"></i><span class="share_buttons_box"><a class="wc_tw" target="_blank" href="https://twitter.com/intent/tweet?text=Hi+Samy%21+I%26%238217%3Bve+verified+the+code+in+the+ZIP+file...+&amp;url=https%3A%2F%2Fandroidkennel.org%2Fandroid-tutorial-getting-the-users-location%2F%23comment-128" title=""><i class="fa fa-twitter wpf-cta" aria-hidden="true"></i><span>Share On Twitter</span></a><a class="wc_go" target="_blank" href="https://plus.google.com/share?url=https://androidkennel.org/android-tutorial-getting-the-users-location/" title=""><i class="fa fa-google wpf-cta" aria-hidden="true"></i><span>Share On Google</span></a></span><span class="wc-comment-img-link-wrap"><i class="fa fa-link wc-comment-img-link wpf-cta" aria-hidden="true"></i><span><input type="text" class="wc-comment-link-input" value="https://androidkennel.org/android-tutorial-getting-the-users-location/#comment-128"></span></span></div><div class="wpdiscuz_clear"></div></div><div class="wc-comment-text">Hi Samy! I’ve verified the code in the ZIP file, and it seems to be in working order. You might want to check out @techken:disqus’s post for some checks. After looking through your code, consider the case that the client connects first before the user accepts the permission. Then we wouldn’t expect to get a value back because onConnected is called first and we don’t have permission yet. It might be better to wait for the permission to be granted first, then check if GoogleApiClient is connected. Or you could take your location-sensitive code and put it in a method<span id="wpdiscuz-readmore-128_125"><span class="wpdiscuz-hellip">…&nbsp;</span><span class="wpdiscuz-readmore" title="Read more »">Read more »</span></span></div><div class="wc-comment-footer"><div class="wc-footer-left"><span class="wc-vote-link wc-up  wc_tooltipster"><i class="fa fa-thumbs-up fa-flip-horizontal wc-vote-img-up"></i><span>You Must Be Logged In To Vote</span></span><span class="wc-vote-result">0</span><span class="wc-vote-link wc-down  wc_tooltipster"><i class="fa fa-thumbs-down wc-vote-img-down"></i><span>You Must Be Logged In To Vote</span></span>&nbsp;<span class="wc-reply-button wc-cta-button" title="Reply"><i class="fa fa-reply" aria-hidden="true"></i> Reply</span></div><div class="wc-footer-right"><div class="wc-comment-date"><i class="fa fa-clock-o" aria-hidden="true"></i>11 months 24 days ago</div><div class="wc-toggle wpdiscuz-hidden"><i class="fa fa-chevron-up" aria-hidden="true" title="Hide Replies"></i></div></div><div class="wpdiscuz_clear"></div></div></div><div class="wpdiscuz-comment-message"></div><div id="wpdiscuz_form_anchor-128_125" style="clear:both"></div></div></div><div id="wc-comm-134_0" class="wc-comment wc-blog-guest wc_comment_level-1"><div class="wc-comment-left "><img src="./How to get the User Location in Android Tutorial – Zenva _ Android Kennel_files/1x1.trans.gif" data-lazy-src="https://secure.gravatar.com/avatar/38b30ae55b8d4bed25ce2426362cdb3d?s=64&amp;d=monsterid&amp;r=g" alt="vatsal harde" srcset="https://secure.gravatar.com/avatar/38b30ae55b8d4bed25ce2426362cdb3d?s=128&amp;d=monsterid&amp;r=g 2x" class="avatar avatar-64 photo" height="64" width="64"><noscript>&lt;img
alt='vatsal harde' src='https://secure.gravatar.com/avatar/38b30ae55b8d4bed25ce2426362cdb3d?s=64&amp;#038;d=monsterid&amp;#038;r=g' srcset="https://secure.gravatar.com/avatar/38b30ae55b8d4bed25ce2426362cdb3d?s=128&amp;amp;d=monsterid&amp;amp;r=g 2x" class='avatar avatar-64 photo' height='64' width='64' /&gt;</noscript><div class="wc-blog-guest wc-comment-label"><span>Guest</span></div></div><div id="comment-134" class="wc-comment-right "><div class="wc-comment-header"><div class="wc-comment-author ">vatsal harde</div><div class="wc-comment-link"><i class="fa fa-share-alt wc-share-link wpf-cta" aria-hidden="true" title="Share"></i><span class="share_buttons_box"><a class="wc_tw" target="_blank" href="https://twitter.com/intent/tweet?text=It%26%238217%3Bs+Worked+Thank+You+very+much%26%238230%3B.For+this...+&amp;url=https%3A%2F%2Fandroidkennel.org%2Fandroid-tutorial-getting-the-users-location%2F%23comment-134" title=""><i class="fa fa-twitter wpf-cta" aria-hidden="true"></i><span>Share On Twitter</span></a><a class="wc_go" target="_blank" href="https://plus.google.com/share?url=https://androidkennel.org/android-tutorial-getting-the-users-location/" title=""><i class="fa fa-google wpf-cta" aria-hidden="true"></i><span>Share On Google</span></a></span><span class="wc-comment-img-link-wrap"><i class="fa fa-link wc-comment-img-link wpf-cta" aria-hidden="true"></i><span><input type="text" class="wc-comment-link-input" value="https://androidkennel.org/android-tutorial-getting-the-users-location/#comment-134"></span></span></div><div class="wpdiscuz_clear"></div></div><div class="wc-comment-text"><p>It’s Worked Thank You very much….For this Nice Tutorial.</p></div><div class="wc-comment-footer"><div class="wc-footer-left"><span class="wc-vote-link wc-up  wc_tooltipster"><i class="fa fa-thumbs-up fa-flip-horizontal wc-vote-img-up"></i><span>You Must Be Logged In To Vote</span></span><span class="wc-vote-result">0</span><span class="wc-vote-link wc-down  wc_tooltipster"><i class="fa fa-thumbs-down wc-vote-img-down"></i><span>You Must Be Logged In To Vote</span></span>&nbsp;<span class="wc-reply-button wc-cta-button" title="Reply"><i class="fa fa-reply" aria-hidden="true"></i> Reply</span></div><div class="wc-footer-right"><div class="wc-comment-date"><i class="fa fa-clock-o" aria-hidden="true"></i>10 months 26 days ago</div><div class="wc-toggle wpdiscuz-hidden"><i class="fa fa-chevron-up" aria-hidden="true" title="Hide Replies"></i></div></div><div class="wpdiscuz_clear"></div></div></div><div class="wpdiscuz-comment-message"></div><div id="wpdiscuz_form_anchor-134_0" style="clear:both"></div></div><div id="wc-comm-135_0" class="wc-comment wc-blog-guest wc_comment_level-1"><div class="wc-comment-left "><img src="./How to get the User Location in Android Tutorial – Zenva _ Android Kennel_files/1x1.trans.gif" data-lazy-src="https://secure.gravatar.com/avatar/34f2055b82250d3e64cf7f8e445ba240?s=64&amp;d=monsterid&amp;r=g" alt="Siva Bharathi" srcset="https://secure.gravatar.com/avatar/34f2055b82250d3e64cf7f8e445ba240?s=128&amp;d=monsterid&amp;r=g 2x" class="avatar avatar-64 photo" height="64" width="64"><noscript>&lt;img
alt='Siva Bharathi' src='https://secure.gravatar.com/avatar/34f2055b82250d3e64cf7f8e445ba240?s=64&amp;#038;d=monsterid&amp;#038;r=g' srcset="https://secure.gravatar.com/avatar/34f2055b82250d3e64cf7f8e445ba240?s=128&amp;amp;d=monsterid&amp;amp;r=g 2x" class='avatar avatar-64 photo' height='64' width='64' /&gt;</noscript><div class="wc-blog-guest wc-comment-label"><span>Guest</span></div></div><div id="comment-135" class="wc-comment-right "><div class="wc-comment-header"><div class="wc-comment-author ">Siva Bharathi</div><div class="wc-comment-link"><i class="fa fa-share-alt wc-share-link wpf-cta" aria-hidden="true" title="Share"></i><span class="share_buttons_box"><a class="wc_tw" target="_blank" href="https://twitter.com/intent/tweet?text=sir%2Cgive+me+a+full+code%0A...+&amp;url=https%3A%2F%2Fandroidkennel.org%2Fandroid-tutorial-getting-the-users-location%2F%23comment-135" title=""><i class="fa fa-twitter wpf-cta" aria-hidden="true"></i><span>Share On Twitter</span></a><a class="wc_go" target="_blank" href="https://plus.google.com/share?url=https://androidkennel.org/android-tutorial-getting-the-users-location/" title=""><i class="fa fa-google wpf-cta" aria-hidden="true"></i><span>Share On Google</span></a></span><span class="wc-comment-img-link-wrap"><i class="fa fa-link wc-comment-img-link wpf-cta" aria-hidden="true"></i><span><input type="text" class="wc-comment-link-input" value="https://androidkennel.org/android-tutorial-getting-the-users-location/#comment-135"></span></span></div><div class="wpdiscuz_clear"></div></div><div class="wc-comment-text"><p>sir,give me a full code</p></div><div class="wc-comment-footer"><div class="wc-footer-left"><span class="wc-vote-link wc-up  wc_tooltipster"><i class="fa fa-thumbs-up fa-flip-horizontal wc-vote-img-up"></i><span>You Must Be Logged In To Vote</span></span><span class="wc-vote-result">0</span><span class="wc-vote-link wc-down  wc_tooltipster"><i class="fa fa-thumbs-down wc-vote-img-down"></i><span>You Must Be Logged In To Vote</span></span>&nbsp;<span class="wc-reply-button wc-cta-button" title="Reply"><i class="fa fa-reply" aria-hidden="true"></i> Reply</span></div><div class="wc-footer-right"><div class="wc-comment-date"><i class="fa fa-clock-o" aria-hidden="true"></i>10 months 7 days ago</div><div class="wc-toggle wpdiscuz-hidden"><i class="fa fa-chevron-up" aria-hidden="true" title="Hide Replies"></i></div></div><div class="wpdiscuz_clear"></div></div></div><div class="wpdiscuz-comment-message"></div><div id="wpdiscuz_form_anchor-135_0" style="clear:both"></div></div><div id="wc-comm-150_0" class="wc-comment wc-blog-guest wc_comment_level-1"><div class="wc-comment-left "><img src="./How to get the User Location in Android Tutorial – Zenva _ Android Kennel_files/1x1.trans.gif" data-lazy-src="https://secure.gravatar.com/avatar/0eff8833557823566d58a92609c574e7?s=64&amp;d=monsterid&amp;r=g" alt="Nishad Panolan" srcset="https://secure.gravatar.com/avatar/0eff8833557823566d58a92609c574e7?s=128&amp;d=monsterid&amp;r=g 2x" class="avatar avatar-64 photo" height="64" width="64"><noscript>&lt;img
alt='Nishad Panolan' src='https://secure.gravatar.com/avatar/0eff8833557823566d58a92609c574e7?s=64&amp;#038;d=monsterid&amp;#038;r=g' srcset="https://secure.gravatar.com/avatar/0eff8833557823566d58a92609c574e7?s=128&amp;amp;d=monsterid&amp;amp;r=g 2x" class='avatar avatar-64 photo' height='64' width='64' /&gt;</noscript><div class="wc-blog-guest wc-comment-label"><span>Guest</span></div></div><div id="comment-150" class="wc-comment-right "><div class="wc-comment-header"><div class="wc-comment-author ">Nishad Panolan</div><div class="wc-comment-link"><i class="fa fa-share-alt wc-share-link wpf-cta" aria-hidden="true" title="Share"></i><span class="share_buttons_box"><a class="wc_tw" target="_blank" href="https://twitter.com/intent/tweet?text=how+to+share+my+location%0A...+&amp;url=https%3A%2F%2Fandroidkennel.org%2Fandroid-tutorial-getting-the-users-location%2F%23comment-150" title=""><i class="fa fa-twitter wpf-cta" aria-hidden="true"></i><span>Share On Twitter</span></a><a class="wc_go" target="_blank" href="https://plus.google.com/share?url=https://androidkennel.org/android-tutorial-getting-the-users-location/" title=""><i class="fa fa-google wpf-cta" aria-hidden="true"></i><span>Share On Google</span></a></span><span class="wc-comment-img-link-wrap"><i class="fa fa-link wc-comment-img-link wpf-cta" aria-hidden="true"></i><span><input type="text" class="wc-comment-link-input" value="https://androidkennel.org/android-tutorial-getting-the-users-location/#comment-150"></span></span></div><div class="wpdiscuz_clear"></div></div><div class="wc-comment-text"><p>how to share my location</p></div><div class="wc-comment-footer"><div class="wc-footer-left"><span class="wc-vote-link wc-up  wc_tooltipster"><i class="fa fa-thumbs-up fa-flip-horizontal wc-vote-img-up"></i><span>You Must Be Logged In To Vote</span></span><span class="wc-vote-result">0</span><span class="wc-vote-link wc-down  wc_tooltipster"><i class="fa fa-thumbs-down wc-vote-img-down"></i><span>You Must Be Logged In To Vote</span></span>&nbsp;<span class="wc-reply-button wc-cta-button" title="Reply"><i class="fa fa-reply" aria-hidden="true"></i> Reply</span></div><div class="wc-footer-right"><div class="wc-comment-date"><i class="fa fa-clock-o" aria-hidden="true"></i>8 months 22 days ago</div><div class="wc-toggle wpdiscuz-hidden"><i class="fa fa-chevron-up" aria-hidden="true" title="Hide Replies"></i></div></div><div class="wpdiscuz_clear"></div></div></div><div class="wpdiscuz-comment-message"></div><div id="wpdiscuz_form_anchor-150_0" style="clear:both"></div></div><div id="wc-comm-156_0" class="wc-comment wc-blog-guest wc_comment_level-1"><div class="wc-comment-left "><img src="./How to get the User Location in Android Tutorial – Zenva _ Android Kennel_files/1x1.trans.gif" data-lazy-src="https://secure.gravatar.com/avatar/52b65b8d8aefde431decacc410fb03eb?s=64&amp;d=monsterid&amp;r=g" alt="Ankit Srivastava" srcset="https://secure.gravatar.com/avatar/52b65b8d8aefde431decacc410fb03eb?s=128&amp;d=monsterid&amp;r=g 2x" class="avatar avatar-64 photo" height="64" width="64"><noscript>&lt;img
alt='Ankit Srivastava' src='https://secure.gravatar.com/avatar/52b65b8d8aefde431decacc410fb03eb?s=64&amp;#038;d=monsterid&amp;#038;r=g' srcset="https://secure.gravatar.com/avatar/52b65b8d8aefde431decacc410fb03eb?s=128&amp;amp;d=monsterid&amp;amp;r=g 2x" class='avatar avatar-64 photo' height='64' width='64' /&gt;</noscript><div class="wc-blog-guest wc-comment-label"><span>Guest</span></div></div><div id="comment-156" class="wc-comment-right "><div class="wc-comment-header"><div class="wc-comment-author ">Ankit Srivastava</div><div class="wc-comment-link"><i class="fa fa-share-alt wc-share-link wpf-cta" aria-hidden="true" title="Share"></i><span class="share_buttons_box"><a class="wc_tw" target="_blank" href="https://twitter.com/intent/tweet?text=hii%2C+location+services+are+showing+in+red+why%3F%3F+Pleas...+&amp;url=https%3A%2F%2Fandroidkennel.org%2Fandroid-tutorial-getting-the-users-location%2F%23comment-156" title=""><i class="fa fa-twitter wpf-cta" aria-hidden="true"></i><span>Share On Twitter</span></a><a class="wc_go" target="_blank" href="https://plus.google.com/share?url=https://androidkennel.org/android-tutorial-getting-the-users-location/" title=""><i class="fa fa-google wpf-cta" aria-hidden="true"></i><span>Share On Google</span></a></span><span class="wc-comment-img-link-wrap"><i class="fa fa-link wc-comment-img-link wpf-cta" aria-hidden="true"></i><span><input type="text" class="wc-comment-link-input" value="https://androidkennel.org/android-tutorial-getting-the-users-location/#comment-156"></span></span></div><div class="wpdiscuz_clear"></div></div><div class="wc-comment-text"><p>hii, location services are showing in red why?? Please help me I am new in android..<br>
I just want to show dialog to enable location that’s it.. Pls help</p></div><div class="wc-comment-footer"><div class="wc-footer-left"><span class="wc-vote-link wc-up  wc_tooltipster"><i class="fa fa-thumbs-up fa-flip-horizontal wc-vote-img-up"></i><span>You Must Be Logged In To Vote</span></span><span class="wc-vote-result">0</span><span class="wc-vote-link wc-down  wc_tooltipster"><i class="fa fa-thumbs-down wc-vote-img-down"></i><span>You Must Be Logged In To Vote</span></span>&nbsp;<span class="wc-reply-button wc-cta-button" title="Reply"><i class="fa fa-reply" aria-hidden="true"></i> Reply</span></div><div class="wc-footer-right"><div class="wc-comment-date"><i class="fa fa-clock-o" aria-hidden="true"></i>7 months 1 day ago</div><div class="wc-toggle wpdiscuz-hidden"><i class="fa fa-chevron-up" aria-hidden="true" title="Hide Replies"></i></div></div><div class="wpdiscuz_clear"></div></div></div><div class="wpdiscuz-comment-message"></div><div id="wpdiscuz_form_anchor-156_0" style="clear:both"></div></div><div class="wpdiscuz-comment-pagination"></div></div><div class="wpdiscuz_clear"></div></div></div><div class="wpdiscuz-loading-bar wpdiscuz-loading-bar-unauth"><img class="wpdiscuz-loading-bar-img" alt="wpDiscuz" src="./How to get the User Location in Android Tutorial – Zenva _ Android Kennel_files/loading.gif" width="32" height="25"></div>
<nav class="navigation post-navigation" role="navigation"><h2 class="screen-reader-text">Post navigation</h2><div class="nav-links"><div class="nav-previous"><a href="https://androidkennel.org/android-networking-tutorial-with-asynctask/" rel="prev"><span class="meta-nav" aria-hidden="true">Previous</span> <span class="screen-reader-text">Previous post:</span> <span class="post-title">Android Networking Tutorial with AsyncTask</span></a></div><div class="nav-next"><a href="https://androidkennel.org/material-design-tutorial/" rel="next"><span class="meta-nav" aria-hidden="true">Next</span> <span class="screen-reader-text">Next post:</span> <span class="post-title">Beginners Guide to Material Design</span></a></div></div>
</nav>
</main></div></div><footer id="colophon" class="site-footer" role="contentinfo"><div id="footer-sidebar" class="footer-sidebar widget-area" role="complementary"><div><div class="textwidget"><strong>©2017 Zenva Pty Ltd all rights reserved</strong>
<br><br>
Zenva and Zenva Academy are registered trademarks protected worldwide by international treaties. Unauthorized use of these trademarks is strictly forbidden and punishable by law.</div></div></div><div class="site-info"></div>
</footer></div> <script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-36584467-8', 'auto');
  ga('send', 'pageview');</script> <script defer="" type="text/javascript" src="./How to get the User Location in Android Tutorial – Zenva _ Android Kennel_files/7345a.js"></script> <script type="text/javascript">/*  */
var appBannersConfig = {"title":"Codemurai","author":"Zenva","price":"FREE","appStoreLanguage":"US","inAppStore":"On the App Store","inGooglePlay":"In Google Play","inAmazonAppStore":"In the Amazon Appstore","inWindowsStore":"In the Windows Store","GooglePlayParams":null,"icon":"https:\/\/lh3.googleusercontent.com\/JC-tW1cvavwpjr5TX8gjhri-i0NdKvCT9dVLws7eUx6xUByHFCMiGAK2OejRbGxI2xY=w300","iconGloss":"","url":"","button":"GET FOR FREE","scale":"auto","speedIn":"300","speedOut":"400","daysHidden":"1","daysReminder":"1","force":null,"hideOnInstall":"1","layer":"","iOSUniversalApp":"1","appendToSelector":"body","printViewPort":"","pushSelector":"html"};
/*  */</script> <script defer="" type="text/javascript" src="./How to get the User Location in Android Tutorial – Zenva _ Android Kennel_files/f4ba8.js"></script> <script type="text/javascript">/*<![CDATA[*//*  */
var screenReaderText = {"expand":"<span class=\"screen-reader-text\">expand child menu<\/span>","collapse":"<span class=\"screen-reader-text\">collapse child menu<\/span>"};
/*  *//*]]>*/</script> <script defer="" type="text/javascript" src="./How to get the User Location in Android Tutorial – Zenva _ Android Kennel_files/3fbb7.js"></script> <div id="zva-modal-area" style="top: 0px; height: 16604px; display: none;"><div id="zva-modal-overlay"></div><div id="zva-modal" style="top: 110px;"><h2>PROGRAMMING TUTORIALS AND COURSES</h2><link href="./How to get the User Location in Android Tutorial – Zenva _ Android Kennel_files/slim-10_7.css" rel="stylesheet" type="text/css"><style type="text/css">/* Add your own MailChimp form style overrides in your site stylesheet or in this style block.
                   We recommend moving this block and the preceding CSS link to the HEAD of your HTML file. */</style><div id="embed_signup">
<img src="./How to get the User Location in Android Tutorial – Zenva _ Android Kennel_files/tech-included.png" alt="Tutorials on game, web and mobile app development"><form action="https://zenva.us5.list-manage.com/subscribe/post?u=f41c9e0b7b18c78350ab6041b&amp;id=1b72637e18" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate" target="_blank" novalidate=""><div id="mc_embed_signup_scroll"><div style="margin-top:20px;margin-bottom:20px;"><label for="mce-EMAIL">Send me the latest programming tutorials.</label></div><div style="margin-top:20px;margin-bottom:20px;">
<input type="email" value="" name="EMAIL" class="email" id="mce-EMAIL" placeholder="email address" required="">
<input type="hidden" value="signup-modal androidkennel.org - https://androidkennel.org/android-tutorial-getting-the-users-location/" name="MMERGE4" id="mce-MMERGE4"></div><div style="position: absolute; left: -5000px;" aria-hidden="true"><input type="text" name="b_f41c9e0b7b18c78350ab6041b_1b72637e18" tabindex="-1" value=""></div><div class="clear">
<input style="background:#009D84;float:left;" type="submit" value="Send me free tutorials" name="subscribe" id="mc-embedded-subscribe" class="button">
<button type="button" id="zva-modal-signup-close">Not now</button></div></div></form></div></div></div> <script>window.addEventListener("load",function() {
        setTimeout(function(){
            
            function getUrlParameter(name) {
                name = name.replace(/[\[]/, '\\[').replace(/[\]]/, '\\]');
                var regex = new RegExp('[\\?&]' + name + '=([^&#]*)');
                var results = regex.exec(location.search);
                return results === null ? '' : decodeURIComponent(results[1].replace(/\+/g, ' '));
            };
                    
            if(document.body.clientWidth > 780 && getUrlParameter('utm_medium') != 'email') {
                document.getElementById('zva-modal-area').style.top = '0px';
                document.getElementById('zva-modal-area').style.height = document.body.clientHeight + 'px';
                document.getElementById('zva-modal-area').style.display = 'block';
                document.getElementById('zva-modal').style.top = ( window.pageYOffset + 110 ) + 'px';

                document.getElementById('zva-modal-overlay').addEventListener('click', function(e){
                    document.getElementById('zva-modal-area').style.display = 'none';
                });
                document.getElementById('zva-modal-signup-close').addEventListener('click', function(e){
                    document.getElementById('zva-modal-area').style.display = 'none';
                });
                
                ga('send', 'event', 'Signup modal', 'prompt');
                
                document.getElementById('mc-embedded-subscribe').addEventListener('click', function(e){
                    ga('send', 'event', 'Signup modal', 'subscribed');
                });
            }  
        }, 60 * 1000);
    });</script> </body></html>